<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shayne007.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.23.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="Core Java ConceptsWhat’s the difference between &#x3D;&#x3D; and .equals() in Java?Reference Answer:  &#x3D;&#x3D; compares references (memory addresses) for objects and values for primitives .equals() compares the actua">
<meta property="og:type" content="article">
<meta property="og:title" content="Java Basic Interview Questions-Reference Answers">
<meta property="og:url" content="https://shayne007.github.io/2025/07/28/Java-Basic-Interview-Questions-Reference-Answers/index.html">
<meta property="og:site_name" content="Charlie Feng&#39;s Tech Space">
<meta property="og:description" content="Core Java ConceptsWhat’s the difference between &#x3D;&#x3D; and .equals() in Java?Reference Answer:  &#x3D;&#x3D; compares references (memory addresses) for objects and values for primitives .equals() compares the actua">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-07-28T15:57:51.000Z">
<meta property="article:modified_time" content="2025-07-28T15:58:41.378Z">
<meta property="article:author" content="Charlie Feng">
<meta property="article:tag" content="java">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://shayne007.github.io/2025/07/28/Java-Basic-Interview-Questions-Reference-Answers/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://shayne007.github.io/2025/07/28/Java-Basic-Interview-Questions-Reference-Answers/","path":"2025/07/28/Java-Basic-Interview-Questions-Reference-Answers/","title":"Java Basic Interview Questions-Reference Answers"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Java Basic Interview Questions-Reference Answers | Charlie Feng's Tech Space</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"cdn":false,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.5.0/mermaid.min.js","integrity":"sha256-2obLuIPcceEhkE3G09G33hBdmE55ivVcZUlcKcGNHjU="}}</script>
  <script src="/js/third-party/tags/mermaid.js" defer></script>





  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Charlie Feng's Tech Space</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">You will survive with skills</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Core-Java-Concepts"><span class="nav-number">1.</span> <span class="nav-text">Core Java Concepts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#What%E2%80%99s-the-difference-between-and-equals-in-Java"><span class="nav-number">1.1.</span> <span class="nav-text">What’s the difference between &#x3D;&#x3D; and .equals() in Java?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Explain-the-Java-memory-model-and-garbage-collection"><span class="nav-number">1.2.</span> <span class="nav-text">Explain the Java memory model and garbage collection.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-are-the-differences-between-abstract-classes-and-interfaces"><span class="nav-number">1.3.</span> <span class="nav-text">What are the differences between abstract classes and interfaces?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Concurrency-and-Threading"><span class="nav-number">2.</span> <span class="nav-text">Concurrency and Threading</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-does-the-volatile-keyword-work"><span class="nav-number">2.1.</span> <span class="nav-text">How does the volatile keyword work?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Explain-different-ways-to-create-threads-and-their-trade-offs"><span class="nav-number">2.2.</span> <span class="nav-text">Explain different ways to create threads and their trade-offs.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What%E2%80%99s-the-difference-between-synchronized-and-ReentrantLock"><span class="nav-number">2.3.</span> <span class="nav-text">What’s the difference between synchronized and ReentrantLock?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Collections-and-Data-Structures"><span class="nav-number">3.</span> <span class="nav-text">Collections and Data Structures</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-does-HashMap-work-internally"><span class="nav-number">3.1.</span> <span class="nav-text">How does HashMap work internally?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#When-would-you-use-ConcurrentHashMap-vs-Collections-synchronizedMap"><span class="nav-number">3.2.</span> <span class="nav-text">When would you use ConcurrentHashMap vs Collections.synchronizedMap()?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Design-Patterns-and-Architecture"><span class="nav-number">4.</span> <span class="nav-text">Design Patterns and Architecture</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Implement-the-Singleton-pattern-and-discuss-its-problems"><span class="nav-number">4.1.</span> <span class="nav-text">Implement the Singleton pattern and discuss its problems.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Explain-dependency-injection-and-inversion-of-control"><span class="nav-number">4.2.</span> <span class="nav-text">Explain dependency injection and inversion of control.</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-and-Optimization"><span class="nav-number">5.</span> <span class="nav-text">Performance and Optimization</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-would-you-identify-and-resolve-a-memory-leak-in-a-Java-application"><span class="nav-number">5.1.</span> <span class="nav-text">How would you identify and resolve a memory leak in a Java application?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-are-some-JVM-tuning-parameters-you%E2%80%99ve-used"><span class="nav-number">5.2.</span> <span class="nav-text">What are some JVM tuning parameters you’ve used?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Modern-Java-Features"><span class="nav-number">6.</span> <span class="nav-text">Modern Java Features</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Explain-streams-and-when-you%E2%80%99d-use-them-vs-traditional-loops"><span class="nav-number">6.1.</span> <span class="nav-text">Explain streams and when you’d use them vs traditional loops.</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#What-are-records-in-Java-14-and-when-would-you-use-them"><span class="nav-number">6.2.</span> <span class="nav-text">What are records in Java 14+ and when would you use them?</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#System-Design-Integration"><span class="nav-number">7.</span> <span class="nav-text">System Design Integration</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#How-would-you-design-a-thread-safe-cache-with-TTL-time-to-live"><span class="nav-number">7.1.</span> <span class="nav-text">How would you design a thread-safe cache with TTL (time-to-live)?</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Explain-how-you%E2%80%99d-handle-database-connections-in-a-high-traffic-application"><span class="nav-number">7.2.</span> <span class="nav-text">Explain how you’d handle database connections in a high-traffic application.</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Charlie Feng</p>
  <div class="site-description" itemprop="description">This place is for thinking and sharing.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">53</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">25</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://shayne007.github.io/2025/07/28/Java-Basic-Interview-Questions-Reference-Answers/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charlie Feng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charlie Feng's Tech Space">
      <meta itemprop="description" content="This place is for thinking and sharing.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Java Basic Interview Questions-Reference Answers | Charlie Feng's Tech Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Java Basic Interview Questions-Reference Answers
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2025-07-28 23:57:51 / Modified: 23:58:41" itemprop="dateCreated datePublished" datetime="2025-07-28T23:57:51+08:00">2025-07-28</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/java/" itemprop="url" rel="index"><span itemprop="name">java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="Core-Java-Concepts"><a href="#Core-Java-Concepts" class="headerlink" title="Core Java Concepts"></a>Core Java Concepts</h2><h3 id="What’s-the-difference-between-and-equals-in-Java"><a href="#What’s-the-difference-between-and-equals-in-Java" class="headerlink" title="What’s the difference between == and .equals() in Java?"></a>What’s the difference between <code>==</code> and <code>.equals()</code> in Java?</h3><p><strong>Reference Answer:</strong></p>
<ul>
<li><code>==</code> compares references (memory addresses) for objects and values for primitives</li>
<li><code>.equals()</code> compares the actual content&#x2F;state of objects</li>
<li>By default, <code>.equals()</code> uses <code>==</code> (reference comparison) unless overridden</li>
<li>When overriding <code>.equals()</code>, you must also override <code>.hashCode()</code> to maintain the contract: if two objects are equal according to <code>.equals()</code>, they must have the same hash code</li>
<li>String pool example: <code>&quot;hello&quot; == &quot;hello&quot;</code> is true due to string interning, but <code>new String(&quot;hello&quot;) == new String(&quot;hello&quot;)</code> is false</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">String</span> <span class="variable">s1</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s2</span> <span class="operator">=</span> <span class="string">&quot;hello&quot;</span>;</span><br><span class="line"><span class="type">String</span> <span class="variable">s3</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">String</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">s1 == s2;        <span class="comment">// true (same reference in string pool)</span></span><br><span class="line">s1 == s3;        <span class="comment">// false (different references)</span></span><br><span class="line">s1.equals(s3);   <span class="comment">// true (same content)</span></span><br></pre></td></tr></table></figure>

<h3 id="Explain-the-Java-memory-model-and-garbage-collection"><a href="#Explain-the-Java-memory-model-and-garbage-collection" class="headerlink" title="Explain the Java memory model and garbage collection."></a>Explain the Java memory model and garbage collection.</h3><p><strong>Reference Answer:</strong><br><strong>Memory Areas:</strong></p>
<ul>
<li><strong>Heap</strong>: Object storage, divided into Young Generation (Eden, S0, S1) and Old Generation</li>
<li><strong>Stack</strong>: Method call frames, local variables, partial results</li>
<li><strong>Method Area&#x2F;Metaspace</strong>: Class metadata, constant pool</li>
<li><strong>PC Register</strong>: Current executing instruction</li>
<li><strong>Native Method Stack</strong>: Native method calls</li>
</ul>
<p><strong>Garbage Collection Process:</strong></p>
<ol>
<li>Objects created in Eden space</li>
<li>When Eden fills, minor GC moves surviving objects to Survivor space</li>
<li>After several GC cycles, long-lived objects promoted to Old Generation</li>
<li>Major GC cleans Old Generation (more expensive)</li>
</ol>
<p><strong>Common GC Algorithms:</strong></p>
<ul>
<li><strong>Serial GC</strong>: Single-threaded, suitable for small applications</li>
<li><strong>Parallel GC</strong>: Multi-threaded, good for throughput</li>
<li><strong>G1GC</strong>: Low-latency, good for large heaps</li>
<li><strong>ZGC&#x2F;Shenandoah</strong>: Ultra-low latency collectors</li>
</ul>
<h3 id="What-are-the-differences-between-abstract-classes-and-interfaces"><a href="#What-are-the-differences-between-abstract-classes-and-interfaces" class="headerlink" title="What are the differences between abstract classes and interfaces?"></a>What are the differences between abstract classes and interfaces?</h3><p><strong>Reference Answer:</strong></p>
<table>
<thead>
<tr>
<th>Aspect</th>
<th>Abstract Class</th>
<th>Interface</th>
</tr>
</thead>
<tbody><tr>
<td>Inheritance</td>
<td>Single inheritance</td>
<td>Multiple inheritance</td>
</tr>
<tr>
<td>Methods</td>
<td>Can have concrete methods</td>
<td>All methods abstract (before Java 8)</td>
</tr>
<tr>
<td>Variables</td>
<td>Can have instance variables</td>
<td>Only public static final variables</td>
</tr>
<tr>
<td>Constructor</td>
<td>Can have constructors</td>
<td>Cannot have constructors</td>
</tr>
<tr>
<td>Access Modifiers</td>
<td>Any access modifier</td>
<td>Public by default</td>
</tr>
</tbody></table>
<p><strong>Modern Java (8+) additions:</strong></p>
<ul>
<li>Interfaces can have default and static methods</li>
<li>Private methods in interfaces (Java 9+)</li>
</ul>
<p><strong>When to use:</strong></p>
<ul>
<li><strong>Abstract Class</strong>: When you have common code to share and “is-a” relationship</li>
<li><strong>Interface</strong>: When you want to define a contract and “can-do” relationship</li>
</ul>
<h2 id="Concurrency-and-Threading"><a href="#Concurrency-and-Threading" class="headerlink" title="Concurrency and Threading"></a>Concurrency and Threading</h2><h3 id="How-does-the-volatile-keyword-work"><a href="#How-does-the-volatile-keyword-work" class="headerlink" title="How does the volatile keyword work?"></a>How does the <code>volatile</code> keyword work?</h3><p><strong>Reference Answer:</strong><br><strong>Purpose:</strong> Ensures visibility of variable changes across threads and prevents instruction reordering.</p>
<p><strong>Memory Effects:</strong></p>
<ul>
<li>Reads&#x2F;writes to volatile variables are directly from&#x2F;to main memory</li>
<li>Creates a happens-before relationship</li>
<li>Prevents compiler optimizations that cache variable values</li>
</ul>
<p><strong>When to use:</strong></p>
<ul>
<li>Simple flags or state variables</li>
<li>Single writer, multiple readers scenarios</li>
<li>Not sufficient for compound operations (like increment)</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">VolatileExample</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">volatile</span> <span class="type">boolean</span> <span class="variable">flag</span> <span class="operator">=</span> <span class="literal">false</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Thread 1</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFlag</span><span class="params">()</span> &#123;</span><br><span class="line">        flag = <span class="literal">true</span>; <span class="comment">// Immediately visible to other threads</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Thread 2</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">checkFlag</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">while</span> (!flag) &#123;</span><br><span class="line">            <span class="comment">// Will see the change immediately</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Limitations:</strong> Doesn’t provide atomicity for compound operations. Use <code>AtomicBoolean</code>, <code>AtomicInteger</code>, etc., for atomic operations.</p>
<h3 id="Explain-different-ways-to-create-threads-and-their-trade-offs"><a href="#Explain-different-ways-to-create-threads-and-their-trade-offs" class="headerlink" title="Explain different ways to create threads and their trade-offs."></a>Explain different ways to create threads and their trade-offs.</h3><p><strong>Reference Answer:</strong></p>
<p><strong>1. Extending Thread class:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyThread</span> <span class="keyword">extends</span> <span class="title class_">Thread</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123; <span class="comment">/* implementation */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">MyThread</span>().start();</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Pros</strong>: Simple, direct control</li>
<li><strong>Cons</strong>: Single inheritance limitation, tight coupling</li>
</ul>
<p><strong>2. Implementing Runnable:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">MyTask</span> <span class="keyword">implements</span> <span class="title class_">Runnable</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">run</span><span class="params">()</span> &#123; <span class="comment">/* implementation */</span> &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">new</span> <span class="title class_">Thread</span>(<span class="keyword">new</span> <span class="title class_">MyTask</span>()).start();</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Pros</strong>: Better design, can extend other classes</li>
<li><strong>Cons</strong>: Still creates OS threads</li>
</ul>
<p><strong>3. ExecutorService:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ExecutorService</span> <span class="variable">executor</span> <span class="operator">=</span> Executors.newFixedThreadPool(<span class="number">10</span>);</span><br><span class="line">executor.submit(() -&gt; &#123; <span class="comment">/* task */</span> &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Pros</strong>: Thread pooling, resource management</li>
<li><strong>Cons</strong>: More complex, need proper shutdown</li>
</ul>
<p><strong>4. CompletableFuture:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CompletableFuture.supplyAsync(() -&gt; &#123; <span class="comment">/* computation */</span> &#125;)</span><br><span class="line">    .thenApply(result -&gt; &#123; <span class="comment">/* transform */</span> &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Pros</strong>: Asynchronous composition, functional style</li>
<li><strong>Cons</strong>: Learning curve, can be overkill for simple tasks</li>
</ul>
<p><strong>5. Virtual Threads (Java 19+):</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Thread.startVirtualThread(() -&gt; &#123; <span class="comment">/* task */</span> &#125;);</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Pros</strong>: Lightweight, millions of threads possible</li>
<li><strong>Cons</strong>: New feature, limited adoption</li>
</ul>
<h3 id="What’s-the-difference-between-synchronized-and-ReentrantLock"><a href="#What’s-the-difference-between-synchronized-and-ReentrantLock" class="headerlink" title="What’s the difference between synchronized and ReentrantLock?"></a>What’s the difference between <code>synchronized</code> and <code>ReentrantLock</code>?</h3><p><strong>Reference Answer:</strong></p>
<table>
<thead>
<tr>
<th>Feature</th>
<th>synchronized</th>
<th>ReentrantLock</th>
</tr>
</thead>
<tbody><tr>
<td>Type</td>
<td>Intrinsic&#x2F;implicit lock</td>
<td>Explicit lock</td>
</tr>
<tr>
<td>Acquisition</td>
<td>Automatic</td>
<td>Manual (lock&#x2F;unlock)</td>
</tr>
<tr>
<td>Fairness</td>
<td>No fairness guarantee</td>
<td>Optional fairness</td>
</tr>
<tr>
<td>Interruptibility</td>
<td>Not interruptible</td>
<td>Interruptible</td>
</tr>
<tr>
<td>Try Lock</td>
<td>Not available</td>
<td>Available</td>
</tr>
<tr>
<td>Condition Variables</td>
<td>wait&#x2F;notify</td>
<td>Multiple Condition objects</td>
</tr>
<tr>
<td>Performance</td>
<td>JVM optimized</td>
<td>Slightly more overhead</td>
</tr>
</tbody></table>
<p><strong>ReentrantLock Example:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">final</span> <span class="type">ReentrantLock</span> <span class="variable">lock</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ReentrantLock</span>(<span class="literal">true</span>); <span class="comment">// fair lock</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">performTask</span><span class="params">()</span> &#123;</span><br><span class="line">    lock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">// critical section</span></span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        lock.unlock(); <span class="comment">// Must be in finally block</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">tryPerformTask</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (lock.tryLock()) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">// critical section</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            lock.unlock();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Collections-and-Data-Structures"><a href="#Collections-and-Data-Structures" class="headerlink" title="Collections and Data Structures"></a>Collections and Data Structures</h2><h3 id="How-does-HashMap-work-internally"><a href="#How-does-HashMap-work-internally" class="headerlink" title="How does HashMap work internally?"></a>How does HashMap work internally?</h3><p><strong>Reference Answer:</strong><br><strong>Internal Structure:</strong></p>
<ul>
<li>Array of buckets (Node&lt;K,V&gt;[] table)</li>
<li>Each bucket can contain a linked list or red-black tree</li>
<li>Default initial capacity: 16, load factor: 0.75</li>
</ul>
<p><strong>Hash Process:</strong></p>
<ol>
<li>Calculate hash code of key using <code>hashCode()</code></li>
<li>Apply hash function: <code>hash(key) = key.hashCode() ^ (key.hashCode() &gt;&gt;&gt; 16)</code></li>
<li>Find bucket: <code>index = hash &amp; (capacity - 1)</code></li>
</ol>
<p><strong>Collision Resolution:</strong></p>
<ul>
<li><strong>Chaining</strong>: Multiple entries in same bucket form linked list</li>
<li><strong>Treeification</strong> (Java 8+): When bucket size ≥ 8, convert to red-black tree</li>
<li><strong>Untreeification</strong>: When bucket size ≤ 6, convert back to linked list</li>
</ul>
<p><strong>Resizing:</strong></p>
<ul>
<li>When size &gt; capacity × load factor, capacity doubles</li>
<li>All entries rehashed to new positions</li>
<li>Expensive operation, can cause performance issues</li>
</ul>
<p><strong>Poor hashCode() Impact:</strong><br>If <code>hashCode()</code> always returns same value, all entries go to one bucket, degrading performance to O(n) for operations.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Simplified internal structure</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">Node</span>&lt;K,V&gt; &#123;</span><br><span class="line">    <span class="keyword">final</span> <span class="type">int</span> hash;</span><br><span class="line">    <span class="keyword">final</span> K key;</span><br><span class="line">    V value;</span><br><span class="line">    Node&lt;K,V&gt; next;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="When-would-you-use-ConcurrentHashMap-vs-Collections-synchronizedMap"><a href="#When-would-you-use-ConcurrentHashMap-vs-Collections-synchronizedMap" class="headerlink" title="When would you use ConcurrentHashMap vs Collections.synchronizedMap()?"></a>When would you use ConcurrentHashMap vs Collections.synchronizedMap()?</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Collections.synchronizedMap():</strong></p>
<ul>
<li>Wraps existing map with synchronized methods</li>
<li><strong>Synchronization</strong>: Entire map locked for each operation</li>
<li><strong>Performance</strong>: Poor in multi-threaded scenarios</li>
<li><strong>Iteration</strong>: Requires external synchronization</li>
<li><strong>Fail-fast</strong>: Iterators can throw ConcurrentModificationException</li>
</ul>
<p><strong>ConcurrentHashMap:</strong></p>
<ul>
<li><strong>Synchronization</strong>: Segment-based locking (Java 7) or CAS operations (Java 8+)</li>
<li><strong>Performance</strong>: Excellent concurrent read performance</li>
<li><strong>Iteration</strong>: Weakly consistent iterators, no external sync needed</li>
<li><strong>Fail-safe</strong>: Iterators reflect state at creation time</li>
<li><strong>Atomic operations</strong>: putIfAbsent(), replace(), computeIfAbsent()</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ConcurrentHashMap example</span></span><br><span class="line">ConcurrentHashMap&lt;String, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">map.putIfAbsent(<span class="string">&quot;key&quot;</span>, <span class="number">1</span>);</span><br><span class="line">map.computeIfPresent(<span class="string">&quot;key&quot;</span>, (k, v) -&gt; v + <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Safe iteration without external synchronization</span></span><br><span class="line"><span class="keyword">for</span> (Map.Entry&lt;String, Integer&gt; entry : map.entrySet()) &#123;</span><br><span class="line">    <span class="comment">// No ConcurrentModificationException</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Use ConcurrentHashMap when:</strong></p>
<ul>
<li>High concurrent access</li>
<li>More reads than writes</li>
<li>Need atomic operations</li>
<li>Want better performance</li>
</ul>
<h2 id="Design-Patterns-and-Architecture"><a href="#Design-Patterns-and-Architecture" class="headerlink" title="Design Patterns and Architecture"></a>Design Patterns and Architecture</h2><h3 id="Implement-the-Singleton-pattern-and-discuss-its-problems"><a href="#Implement-the-Singleton-pattern-and-discuss-its-problems" class="headerlink" title="Implement the Singleton pattern and discuss its problems."></a>Implement the Singleton pattern and discuss its problems.</h3><p><strong>Reference Answer:</strong></p>
<p><strong>1. Eager Initialization:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EagerSingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">EagerSingleton</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">EagerSingleton</span>();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">EagerSingleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> EagerSingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>Pros</strong>: Thread-safe, simple</li>
<li><strong>Cons</strong>: Creates instance even if never used</li>
</ul>
<p><strong>2. Lazy Initialization (Thread-unsafe):</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LazySingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> LazySingleton instance;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">LazySingleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> LazySingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            instance = <span class="keyword">new</span> <span class="title class_">LazySingleton</span>(); <span class="comment">// Race condition!</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3. Thread-safe Lazy (Double-checked locking):</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadSafeSingleton</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> ThreadSafeSingleton instance;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">ThreadSafeSingleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> ThreadSafeSingleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span> (ThreadSafeSingleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">ThreadSafeSingleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4. Enum Singleton (Recommended):</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">EnumSingleton</span> &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doSomething</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// business logic</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Problems with Singleton:</strong></p>
<ul>
<li><strong>Testing</strong>: Difficult to mock, global state</li>
<li><strong>Coupling</strong>: Tight coupling throughout application</li>
<li><strong>Scalability</strong>: Global bottleneck</li>
<li><strong>Serialization</strong>: Need special handling</li>
<li><strong>Reflection</strong>: Can break private constructor</li>
<li><strong>Classloader</strong>: Multiple instances with different classloaders</li>
</ul>
<h3 id="Explain-dependency-injection-and-inversion-of-control"><a href="#Explain-dependency-injection-and-inversion-of-control" class="headerlink" title="Explain dependency injection and inversion of control."></a>Explain dependency injection and inversion of control.</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Inversion of Control (IoC):</strong><br>Principle where control of object creation and lifecycle is transferred from the application code to an external framework.</p>
<p><strong>Dependency Injection (DI):</strong><br>A technique to implement IoC where dependencies are provided to an object rather than the object creating them.</p>
<p><strong>Types of DI:</strong></p>
<p><strong>1. Constructor Injection:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserRepository userRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserRepository userRepository)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userRepository = userRepository;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2. Setter Injection:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUserRepository</span><span class="params">(UserRepository userRepository)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.userRepository = userRepository;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>3. Field Injection:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="meta">@Inject</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Benefits:</strong></p>
<ul>
<li><strong>Testability</strong>: Easy to inject mock dependencies</li>
<li><strong>Flexibility</strong>: Change implementations without code changes</li>
<li><strong>Decoupling</strong>: Reduces tight coupling between classes</li>
<li><strong>Configuration</strong>: Centralized dependency configuration</li>
</ul>
<p><strong>Without DI:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">UserRepository</span> <span class="variable">userRepository</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DatabaseUserRepository</span>(); <span class="comment">// Tight coupling</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>With DI:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> UserRepository userRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">UserService</span><span class="params">(UserRepository userRepository)</span> &#123; <span class="comment">// Loose coupling</span></span><br><span class="line">        <span class="built_in">this</span>.userRepository = userRepository;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Performance-and-Optimization"><a href="#Performance-and-Optimization" class="headerlink" title="Performance and Optimization"></a>Performance and Optimization</h2><h3 id="How-would-you-identify-and-resolve-a-memory-leak-in-a-Java-application"><a href="#How-would-you-identify-and-resolve-a-memory-leak-in-a-Java-application" class="headerlink" title="How would you identify and resolve a memory leak in a Java application?"></a>How would you identify and resolve a memory leak in a Java application?</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Identification Tools:</strong></p>
<ol>
<li><strong>JVisualVM</strong>: Visual profiler, heap dumps</li>
<li><strong>JProfiler</strong>: Commercial profiler</li>
<li><strong>Eclipse MAT</strong>: Memory Analyzer Tool</li>
<li><strong>JConsole</strong>: Built-in monitoring</li>
<li><strong>Application metrics</strong>: OutOfMemoryError frequency</li>
</ol>
<p><strong>Detection Signs:</strong></p>
<ul>
<li>Gradual memory increase over time</li>
<li>OutOfMemoryError exceptions</li>
<li>Increasing GC frequency&#x2F;duration</li>
<li>Application slowdown</li>
</ul>
<p><strong>Analysis Process:</strong></p>
<p><strong>1. Heap Dump Analysis:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">jcmd &lt;pid&gt; GC.run_finalization</span><br><span class="line">jcmd &lt;pid&gt; VM.gc</span><br><span class="line">jmap -dump:format=b,file=heapdump.hprof &lt;pid&gt;</span><br></pre></td></tr></table></figure>

<p><strong>2. Common Leak Scenarios:</strong></p>
<p><strong>Static Collections:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LeakyClass</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> List&lt;Object&gt; cache = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;(); <span class="comment">// Never cleared</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addToCache</span><span class="params">(Object obj)</span> &#123;</span><br><span class="line">        cache.add(obj); <span class="comment">// Memory leak!</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Listener Registration:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EventPublisher</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;EventListener&gt; listeners = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addListener</span><span class="params">(EventListener listener)</span> &#123;</span><br><span class="line">        listeners.add(listener); <span class="comment">// If not removed, leak!</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">removeListener</span><span class="params">(EventListener listener)</span> &#123;</span><br><span class="line">        listeners.remove(listener); <span class="comment">// Often forgotten</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ThreadLocal Variables:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ThreadLocalLeak</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;ExpensiveObject&gt; threadLocal = <span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setThreadLocalValue</span><span class="params">()</span> &#123;</span><br><span class="line">        threadLocal.set(<span class="keyword">new</span> <span class="title class_">ExpensiveObject</span>()); <span class="comment">// Clear when done!</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">cleanup</span><span class="params">()</span> &#123;</span><br><span class="line">        threadLocal.remove(); <span class="comment">// Essential in long-lived threads</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Resolution Strategies:</strong></p>
<ul>
<li>Use weak references where appropriate</li>
<li>Implement proper cleanup in finally blocks</li>
<li>Clear collections when no longer needed</li>
<li>Remove listeners in lifecycle methods</li>
<li>Use try-with-resources for automatic cleanup</li>
<li>Monitor object creation patterns</li>
</ul>
<h3 id="What-are-some-JVM-tuning-parameters-you’ve-used"><a href="#What-are-some-JVM-tuning-parameters-you’ve-used" class="headerlink" title="What are some JVM tuning parameters you’ve used?"></a>What are some JVM tuning parameters you’ve used?</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Heap Memory:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-Xms2g          <span class="comment"># Initial heap size</span></span><br><span class="line">-Xmx8g          <span class="comment"># Maximum heap size</span></span><br><span class="line">-XX:NewRatio=3  <span class="comment"># Old/Young generation ratio</span></span><br><span class="line">-XX:MaxMetaspaceSize=256m  <span class="comment"># Metaspace limit</span></span><br></pre></td></tr></table></figure>

<p><strong>Garbage Collection:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># G1GC (recommended for large heaps)</span></span><br><span class="line">-XX:+UseG1GC</span><br><span class="line">-XX:MaxGCPauseMillis=200</span><br><span class="line">-XX:G1HeapRegionSize=16m</span><br><span class="line"></span><br><span class="line"><span class="comment"># Parallel GC (good throughput)</span></span><br><span class="line">-XX:+UseParallelGC</span><br><span class="line">-XX:ParallelGCThreads=8</span><br><span class="line"></span><br><span class="line"><span class="comment"># ZGC (ultra-low latency)</span></span><br><span class="line">-XX:+UseZGC</span><br><span class="line">-XX:+UnlockExperimentalVMOptions</span><br></pre></td></tr></table></figure>

<p><strong>GC Logging:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-Xlog:gc*:gc.log:<span class="keyword">time</span>,tags</span><br><span class="line">-XX:+UseGCLogFileRotation</span><br><span class="line">-XX:NumberOfGCLogFiles=5</span><br><span class="line">-XX:GCLogFileSize=100M</span><br></pre></td></tr></table></figure>

<p><strong>Performance Monitoring:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-XX:+PrintGCDetails</span><br><span class="line">-XX:+PrintGCTimeStamps</span><br><span class="line">-XX:+HeapDumpOnOutOfMemoryError</span><br><span class="line">-XX:HeapDumpPath=/path/to/dumps/</span><br></pre></td></tr></table></figure>

<p><strong>JIT Compilation:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-XX:+TieredCompilation</span><br><span class="line">-XX:CompileThreshold=10000</span><br><span class="line">-XX:+PrintCompilation</span><br></pre></td></tr></table></figure>

<p><strong>Common Tuning Scenarios:</strong></p>
<ul>
<li><strong>High throughput</strong>: Parallel GC, larger heap</li>
<li><strong>Low latency</strong>: G1GC or ZGC, smaller pause times</li>
<li><strong>Memory constrained</strong>: Smaller heap, compressed OOPs</li>
<li><strong>CPU intensive</strong>: More GC threads, tiered compilation</li>
</ul>
<h2 id="Modern-Java-Features"><a href="#Modern-Java-Features" class="headerlink" title="Modern Java Features"></a>Modern Java Features</h2><h3 id="Explain-streams-and-when-you’d-use-them-vs-traditional-loops"><a href="#Explain-streams-and-when-you’d-use-them-vs-traditional-loops" class="headerlink" title="Explain streams and when you’d use them vs traditional loops."></a>Explain streams and when you’d use them vs traditional loops.</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Stream Characteristics:</strong></p>
<ul>
<li><strong>Functional</strong>: Declarative programming style</li>
<li><strong>Lazy</strong>: Operations executed only when terminal operation called</li>
<li><strong>Immutable</strong>: Original collection unchanged</li>
<li><strong>Chainable</strong>: Fluent API for operation composition</li>
</ul>
<p><strong>Stream Example:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">List&lt;String&gt; names = Arrays.asList(<span class="string">&quot;Alice&quot;</span>, <span class="string">&quot;Bob&quot;</span>, <span class="string">&quot;Charlie&quot;</span>, <span class="string">&quot;David&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Traditional loop</span></span><br><span class="line">List&lt;String&gt; result = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line"><span class="keyword">for</span> (String name : names) &#123;</span><br><span class="line">    <span class="keyword">if</span> (name.length() &gt; <span class="number">4</span>) &#123;</span><br><span class="line">        result.add(name.toUpperCase());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Stream approach</span></span><br><span class="line">List&lt;String&gt; result = names.stream()</span><br><span class="line">    .filter(name -&gt; name.length() &gt; <span class="number">4</span>)</span><br><span class="line">    .map(String::toUpperCase)</span><br><span class="line">    .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p><strong>When to use Streams:</strong></p>
<ul>
<li><strong>Data transformation pipelines</strong></li>
<li><strong>Complex filtering&#x2F;mapping operations</strong></li>
<li><strong>Parallel processing</strong> (<code>.parallelStream()</code>)</li>
<li><strong>Functional programming style preferred</strong></li>
<li><strong>Readability</strong> over performance for complex operations</li>
</ul>
<p><strong>When to use Traditional Loops:</strong></p>
<ul>
<li><strong>Simple iterations</strong> without transformations</li>
<li><strong>Performance critical</strong> tight loops</li>
<li><strong>Early termination</strong> needed</li>
<li><strong>State modification</strong> during iteration</li>
<li><strong>Index-based</strong> operations</li>
</ul>
<p><strong>Performance Considerations:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Stream overhead for simple operations</span></span><br><span class="line">list.stream().forEach(System.out::println); <span class="comment">// Slower</span></span><br><span class="line">list.forEach(System.out::println);           <span class="comment">// Faster</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Streams excel at complex operations</span></span><br><span class="line">list.stream()</span><br><span class="line">    .filter(complex_predicate)</span><br><span class="line">    .map(expensive_transformation)</span><br><span class="line">    .sorted()</span><br><span class="line">    .limit(<span class="number">10</span>)</span><br><span class="line">    .collect(Collectors.toList()); <span class="comment">// More readable than equivalent loop</span></span><br></pre></td></tr></table></figure>

<h3 id="What-are-records-in-Java-14-and-when-would-you-use-them"><a href="#What-are-records-in-Java-14-and-when-would-you-use-them" class="headerlink" title="What are records in Java 14+ and when would you use them?"></a>What are records in Java 14+ and when would you use them?</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Records Definition:</strong><br>Records are immutable data carriers that automatically generate boilerplate code.</p>
<p><strong>Basic Record:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Person</span><span class="params">(String name, <span class="type">int</span> age, String email)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Automatically generates:</span></span><br><span class="line"><span class="comment">// - Constructor: Person(String name, int age, String email)</span></span><br><span class="line"><span class="comment">// - Accessors: name(), age(), email()</span></span><br><span class="line"><span class="comment">// - equals(), hashCode(), toString()</span></span><br><span class="line"><span class="comment">// - All fields are private final</span></span><br></pre></td></tr></table></figure>

<p><strong>Custom Methods:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">Point</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span> &#123;</span><br><span class="line">    <span class="comment">// Custom constructor with validation</span></span><br><span class="line">    <span class="keyword">public</span> Point &#123;</span><br><span class="line">        <span class="keyword">if</span> (x &lt; <span class="number">0</span> || y &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;Coordinates must be positive&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Additional methods</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">double</span> <span class="title function_">distanceFromOrigin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Math.sqrt(x * x + y * y);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// Static factory method</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Point <span class="title function_">origin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Point</span>(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>When to Use Records:</strong></p>
<ul>
<li><strong>Data Transfer Objects</strong> (DTOs)</li>
<li><strong>Configuration objects</strong></li>
<li><strong>API response&#x2F;request models</strong></li>
<li><strong>Value objects</strong> in domain modeling</li>
<li><strong>Tuple-like</strong> data structures</li>
<li><strong>Database result mapping</strong></li>
</ul>
<p><strong>Example Use Cases:</strong></p>
<p><strong>API Response:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">UserResponse</span><span class="params">(Long id, String username, String email, LocalDateTime createdAt)</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Usage</span></span><br><span class="line"><span class="keyword">return</span> users.stream()</span><br><span class="line">    .map(user -&gt; <span class="keyword">new</span> <span class="title class_">UserResponse</span>(user.getId(), user.getUsername(), </span><br><span class="line">                                 user.getEmail(), user.getCreatedAt()))</span><br><span class="line">    .collect(Collectors.toList());</span><br></pre></td></tr></table></figure>

<p><strong>Configuration:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">record</span> <span class="title class_">DatabaseConfig</span><span class="params">(String url, String username, String password, </span></span><br><span class="line"><span class="params">                           <span class="type">int</span> maxConnections, Duration timeout)</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Limitations:</strong></p>
<ul>
<li>Cannot extend other classes (can implement interfaces)</li>
<li>All fields are implicitly final</li>
<li>Cannot declare instance fields beyond record components</li>
<li>Less flexibility than regular classes</li>
</ul>
<p><strong>Records vs Classes:</strong></p>
<ul>
<li><strong>Use Records</strong>: Immutable data, minimal behavior</li>
<li><strong>Use Classes</strong>: Mutable state, complex behavior, inheritance needed</li>
</ul>
<h2 id="System-Design-Integration"><a href="#System-Design-Integration" class="headerlink" title="System Design Integration"></a>System Design Integration</h2><h3 id="How-would-you-design-a-thread-safe-cache-with-TTL-time-to-live"><a href="#How-would-you-design-a-thread-safe-cache-with-TTL-time-to-live" class="headerlink" title="How would you design a thread-safe cache with TTL (time-to-live)?"></a>How would you design a thread-safe cache with TTL (time-to-live)?</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Design Requirements:</strong></p>
<ul>
<li>Thread-safe concurrent access</li>
<li>Automatic expiration based on TTL</li>
<li>Efficient cleanup of expired entries</li>
<li>Good performance for reads and writes</li>
</ul>
<p><strong>Implementation:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">TTLCache</span>&lt;K, V&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title class_">CacheEntry</span>&lt;V&gt; &#123;</span><br><span class="line">        <span class="keyword">final</span> V value;</span><br><span class="line">        <span class="keyword">final</span> <span class="type">long</span> expirationTime;</span><br><span class="line">        </span><br><span class="line">        CacheEntry(V value, <span class="type">long</span> ttlMillis) &#123;</span><br><span class="line">            <span class="built_in">this</span>.value = value;</span><br><span class="line">            <span class="built_in">this</span>.expirationTime = System.currentTimeMillis() + ttlMillis;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="type">boolean</span> <span class="title function_">isExpired</span><span class="params">()</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> System.currentTimeMillis() &gt; expirationTime;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ConcurrentHashMap&lt;K, CacheEntry&lt;V&gt;&gt; cache = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> ScheduledExecutorService cleanupExecutor;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="type">long</span> defaultTTL;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">TTLCache</span><span class="params">(<span class="type">long</span> defaultTTLMillis, <span class="type">long</span> cleanupIntervalMillis)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.defaultTTL = defaultTTLMillis;</span><br><span class="line">        <span class="built_in">this</span>.cleanupExecutor = Executors.newSingleThreadScheduledExecutor(r -&gt; &#123;</span><br><span class="line">            <span class="type">Thread</span> <span class="variable">t</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Thread</span>(r, <span class="string">&quot;TTLCache-Cleanup&quot;</span>);</span><br><span class="line">            t.setDaemon(<span class="literal">true</span>);</span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">        &#125;);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Schedule periodic cleanup</span></span><br><span class="line">        cleanupExecutor.scheduleAtFixedRate(<span class="built_in">this</span>::cleanup, </span><br><span class="line">            cleanupIntervalMillis, cleanupIntervalMillis, TimeUnit.MILLISECONDS);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value)</span> &#123;</span><br><span class="line">        put(key, value, defaultTTL);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">put</span><span class="params">(K key, V value, <span class="type">long</span> ttlMillis)</span> &#123;</span><br><span class="line">        cache.put(key, <span class="keyword">new</span> <span class="title class_">CacheEntry</span>&lt;&gt;(value, ttlMillis));</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> V <span class="title function_">get</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        CacheEntry&lt;V&gt; entry = cache.get(key);</span><br><span class="line">        <span class="keyword">if</span> (entry == <span class="literal">null</span> || entry.isExpired()) &#123;</span><br><span class="line">            cache.remove(key); <span class="comment">// Clean up expired entry</span></span><br><span class="line">            <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> entry.value;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">containsKey</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> get(key) != <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">remove</span><span class="params">(K key)</span> &#123;</span><br><span class="line">        cache.remove(key);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">clear</span><span class="params">()</span> &#123;</span><br><span class="line">        cache.clear();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">size</span><span class="params">()</span> &#123;</span><br><span class="line">        cleanup(); <span class="comment">// Clean expired entries first</span></span><br><span class="line">        <span class="keyword">return</span> cache.size();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">cleanup</span><span class="params">()</span> &#123;</span><br><span class="line">        cache.entrySet().removeIf(entry -&gt; entry.getValue().isExpired());</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">shutdown</span><span class="params">()</span> &#123;</span><br><span class="line">        cleanupExecutor.shutdown();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (!cleanupExecutor.awaitTermination(<span class="number">5</span>, TimeUnit.SECONDS)) &#123;</span><br><span class="line">                cleanupExecutor.shutdownNow();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            cleanupExecutor.shutdownNow();</span><br><span class="line">            Thread.currentThread().interrupt();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>Usage Example:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Create cache with 5-minute default TTL, cleanup every minute</span></span><br><span class="line">TTLCache&lt;String, UserData&gt; userCache = <span class="keyword">new</span> <span class="title class_">TTLCache</span>&lt;&gt;(<span class="number">5</span> * <span class="number">60</span> * <span class="number">1000</span>, <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Store with default TTL</span></span><br><span class="line">userCache.put(<span class="string">&quot;user123&quot;</span>, userData);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Store with custom TTL (10 minutes)</span></span><br><span class="line">userCache.put(<span class="string">&quot;session456&quot;</span>, sessionData, <span class="number">10</span> * <span class="number">60</span> * <span class="number">1000</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Retrieve</span></span><br><span class="line"><span class="type">UserData</span> <span class="variable">user</span> <span class="operator">=</span> userCache.get(<span class="string">&quot;user123&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>Alternative Approaches:</strong></p>
<ul>
<li><strong>Caffeine Cache</strong>: Production-ready with advanced features</li>
<li><strong>Guava Cache</strong>: Google’s caching library</li>
<li><strong>Redis</strong>: External cache for distributed systems</li>
<li><strong>Chronicle Map</strong>: Off-heap storage for large datasets</li>
</ul>
<h3 id="Explain-how-you’d-handle-database-connections-in-a-high-traffic-application"><a href="#Explain-how-you’d-handle-database-connections-in-a-high-traffic-application" class="headerlink" title="Explain how you’d handle database connections in a high-traffic application."></a>Explain how you’d handle database connections in a high-traffic application.</h3><p><strong>Reference Answer:</strong></p>
<p><strong>Connection Pooling Strategy:</strong></p>
<p><strong>1. HikariCP Configuration (Recommended):</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DatabaseConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">dataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">HikariConfig</span> <span class="variable">config</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">HikariConfig</span>();</span><br><span class="line">        config.setJdbcUrl(<span class="string">&quot;jdbc:postgresql://localhost:5432/mydb&quot;</span>);</span><br><span class="line">        config.setUsername(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">        config.setPassword(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Pool sizing</span></span><br><span class="line">        config.setMaximumPoolSize(<span class="number">20</span>);              <span class="comment">// Max connections</span></span><br><span class="line">        config.setMinimumIdle(<span class="number">5</span>);                   <span class="comment">// Min idle connections</span></span><br><span class="line">        config.setConnectionTimeout(<span class="number">30000</span>);         <span class="comment">// 30 seconds timeout</span></span><br><span class="line">        config.setIdleTimeout(<span class="number">600000</span>);              <span class="comment">// 10 minutes idle timeout</span></span><br><span class="line">        config.setMaxLifetime(<span class="number">1800000</span>);             <span class="comment">// 30 minutes max lifetime</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">// Performance tuning</span></span><br><span class="line">        config.setLeakDetectionThreshold(<span class="number">60000</span>);    <span class="comment">// 1 minute leak detection</span></span><br><span class="line">        config.setCachePrepStmts(<span class="literal">true</span>);</span><br><span class="line">        config.setPrepStmtCacheSize(<span class="number">250</span>);</span><br><span class="line">        config.setPrepStmtCacheSqlLimit(<span class="number">2048</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">HikariDataSource</span>(config);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2. Connection Pool Sizing:</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">connections = ((core_count * 2) + effective_spindle_count)</span><br><span class="line"></span><br><span class="line">For CPU-intensive: core_count * 2</span><br><span class="line">For I/O-intensive: higher multiplier (3-4x)</span><br><span class="line">Monitor and adjust based on actual usage</span><br></pre></td></tr></table></figure>

<p><strong>3. Transaction Management:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="meta">@Transactional</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserService</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserRepository userRepository;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional(readOnly = true)</span></span><br><span class="line">    <span class="keyword">public</span> User <span class="title function_">findById</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> userRepository.findById(id);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional(propagation = Propagation.REQUIRES_NEW)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">updateUserAsync</span><span class="params">(Long id, UserData data)</span> &#123;</span><br><span class="line">        <span class="comment">// Runs in separate transaction</span></span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> userRepository.findById(id);</span><br><span class="line">        user.update(data);</span><br><span class="line">        userRepository.save(user);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Transactional(timeout = 30)</span> <span class="comment">// 30 seconds timeout</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">bulkOperation</span><span class="params">(List&lt;User&gt; users)</span> &#123;</span><br><span class="line">        users.forEach(userRepository::save);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4. Read&#x2F;Write Splitting:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DatabaseRoutingConfig</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@Primary</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">routingDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">RoutingDataSource</span> <span class="variable">routingDataSource</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">RoutingDataSource</span>();</span><br><span class="line">        </span><br><span class="line">        Map&lt;Object, Object&gt; targetDataSources = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        targetDataSources.put(<span class="string">&quot;write&quot;</span>, writeDataSource());</span><br><span class="line">        targetDataSources.put(<span class="string">&quot;read&quot;</span>, readDataSource());</span><br><span class="line">        </span><br><span class="line">        routingDataSource.setTargetDataSources(targetDataSources);</span><br><span class="line">        routingDataSource.setDefaultTargetDataSource(writeDataSource());</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> routingDataSource;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">writeDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Master database configuration</span></span><br><span class="line">        <span class="keyword">return</span> createDataSource(<span class="string">&quot;jdbc:postgresql://master:5432/mydb&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> DataSource <span class="title function_">readDataSource</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// Replica database configuration</span></span><br><span class="line">        <span class="keyword">return</span> createDataSource(<span class="string">&quot;jdbc:postgresql://replica:5432/mydb&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RoutingDataSource</span> <span class="keyword">extends</span> <span class="title class_">AbstractRoutingDataSource</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> Object <span class="title function_">determineCurrentLookupKey</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> TransactionSynchronizationManager.isCurrentTransactionReadOnly() ? <span class="string">&quot;read&quot;</span> : <span class="string">&quot;write&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>5. Monitoring and Health Checks:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DatabaseHealthIndicator</span> <span class="keyword">implements</span> <span class="title class_">HealthIndicator</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> DataSource dataSource;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Health <span class="title function_">health</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> (<span class="type">Connection</span> <span class="variable">connection</span> <span class="operator">=</span> dataSource.getConnection()) &#123;</span><br><span class="line">            <span class="keyword">if</span> (connection.isValid(<span class="number">2</span>)) &#123; <span class="comment">// 2 second timeout</span></span><br><span class="line">                <span class="keyword">return</span> Health.up()</span><br><span class="line">                    .withDetail(<span class="string">&quot;database&quot;</span>, <span class="string">&quot;Available&quot;</span>)</span><br><span class="line">                    .withDetail(<span class="string">&quot;active-connections&quot;</span>, getActiveConnections())</span><br><span class="line">                    .build();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">return</span> Health.down()</span><br><span class="line">                .withDetail(<span class="string">&quot;database&quot;</span>, <span class="string">&quot;Unavailable&quot;</span>)</span><br><span class="line">                .withException(e)</span><br><span class="line">                .build();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Health.down().withDetail(<span class="string">&quot;database&quot;</span>, <span class="string">&quot;Connection invalid&quot;</span>).build();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> <span class="title function_">getActiveConnections</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (dataSource <span class="keyword">instanceof</span> HikariDataSource) &#123;</span><br><span class="line">            <span class="keyword">return</span> ((HikariDataSource) dataSource).getHikariPoolMXBean().getActiveConnections();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> -<span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>6. Best Practices for High Traffic:</strong></p>
<p><strong>Connection Management:</strong></p>
<ul>
<li>Always use connection pooling</li>
<li>Set appropriate timeouts</li>
<li>Monitor pool metrics</li>
<li>Use read replicas for read-heavy workloads</li>
</ul>
<p><strong>Query Optimization:</strong></p>
<ul>
<li>Use prepared statements</li>
<li>Implement proper indexing</li>
<li>Cache frequently accessed data</li>
<li>Use batch operations for bulk updates</li>
</ul>
<p><strong>Resilience Patterns:</strong></p>
<ul>
<li>Circuit breaker for database failures</li>
<li>Retry logic with exponential backoff</li>
<li>Graceful degradation when database unavailable</li>
<li>Database failover strategies</li>
</ul>
<p><strong>Performance Monitoring:</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@EventListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">handleConnectionPoolMetrics</span><span class="params">(ConnectionPoolMetricsEvent event)</span> &#123;</span><br><span class="line">    logger.info(<span class="string">&quot;Active connections: &#123;&#125;, Idle: &#123;&#125;, Waiting: &#123;&#125;&quot;</span>, </span><br><span class="line">        event.getActive(), event.getIdle(), event.getWaiting());</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (event.getActive() &gt; event.getMaxPool() * <span class="number">0.8</span>) &#123;</span><br><span class="line">        alertingService.sendAlert(<span class="string">&quot;High database connection usage&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>This comprehensive approach ensures database connections are efficiently managed in high-traffic scenarios while maintaining performance and reliability.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/java/" rel="tag"># java</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/07/02/Design-FinTech-AI-Workflow-and-Chat-System/" rel="prev" title="Design FinTech AI Workflow and Chat System">
                  <i class="fa fa-angle-left"></i> Design FinTech AI Workflow and Chat System
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/08/03/K8s-common-interview-questions/" rel="next" title="K8s common interview questions">
                  K8s common interview questions <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Charlie Feng</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
