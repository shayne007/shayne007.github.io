<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" integrity="sha256-dABdfBfUoC8vJUBOwGVdm8L9qlMWaHTIfXt+7GnZCIo=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"shayne007.github.io","root":"/","images":"/images","scheme":"Muse","darkmode":false,"version":"8.23.0","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"codeblock":{"theme":{"light":"default","dark":"stackoverflow-dark"},"prism":{"light":"prism","dark":"prism-dark"},"copy_button":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"language":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"duration":200,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js" defer></script>

    <meta name="description" content="IntroductionRedis (Remote Dictionary Server) is an in-memory data structure store that supports various data types. Understanding the underlying data structures is crucial for optimal performance and">
<meta property="og:type" content="article">
<meta property="og:title" content="Redis Data Types and Data Structures: Complete Guide">
<meta property="og:url" content="https://shayne007.github.io/2025/06/09/Redis-Data-Types-and-Data-Structures-Complete-Guide/index.html">
<meta property="og:site_name" content="Charlie Feng&#39;s Tech Space">
<meta property="og:description" content="IntroductionRedis (Remote Dictionary Server) is an in-memory data structure store that supports various data types. Understanding the underlying data structures is crucial for optimal performance and">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-06-09T13:40:29.000Z">
<meta property="article:modified_time" content="2025-06-09T14:45:29.120Z">
<meta property="article:author" content="Charlie Feng">
<meta property="article:tag" content="redis">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://shayne007.github.io/2025/06/09/Redis-Data-Types-and-Data-Structures-Complete-Guide/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://shayne007.github.io/2025/06/09/Redis-Data-Types-and-Data-Structures-Complete-Guide/","path":"2025/06/09/Redis-Data-Types-and-Data-Structures-Complete-Guide/","title":"Redis Data Types and Data Structures: Complete Guide"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>Redis Data Types and Data Structures: Complete Guide | Charlie Feng's Tech Space</title>
  








  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous" defer></script>
<script src="/js/utils.js" defer></script><script src="/js/motion.js" defer></script><script src="/js/sidebar.js" defer></script><script src="/js/next-boot.js" defer></script>

  

  <script class="next-config" data-name="mermaid" type="application/json">{"enable":true,"theme":{"light":"default","dark":"dark"},"cdn":false,"js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mermaid/11.5.0/mermaid.min.js","integrity":"sha256-2obLuIPcceEhkE3G09G33hBdmE55ivVcZUlcKcGNHjU="}}</script>
  <script src="/js/third-party/tags/mermaid.js" defer></script>





  





  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Charlie Feng's Tech Space</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">You will survive with skills</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Introduction"><span class="nav-number">1.</span> <span class="nav-text">Introduction</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String"><span class="nav-number">2.</span> <span class="nav-text">String</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structure-Simple-Dynamic-String-SDS"><span class="nav-number">2.1.</span> <span class="nav-text">Underlying Data Structure: Simple Dynamic String (SDS)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Structure-Layout"><span class="nav-number">2.2.</span> <span class="nav-text">Structure Layout</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices"><span class="nav-number">2.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Caching"><span class="nav-number">2.3.1.</span> <span class="nav-text">1. Caching</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Counters"><span class="nav-number">2.3.2.</span> <span class="nav-text">2. Counters</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Distributed-Locks"><span class="nav-number">2.3.3.</span> <span class="nav-text">3. Distributed Locks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory-Optimization-Tips"><span class="nav-number">2.4.</span> <span class="nav-text">Memory Optimization Tips</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hash"><span class="nav-number">3.</span> <span class="nav-text">Hash</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structures"><span class="nav-number">3.1.</span> <span class="nav-text">Underlying Data Structures</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration-Thresholds"><span class="nav-number">3.2.</span> <span class="nav-text">Configuration Thresholds</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-1"><span class="nav-number">3.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-User-Profiles"><span class="nav-number">3.3.1.</span> <span class="nav-text">1. User Profiles</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Object-Storage"><span class="nav-number">3.3.2.</span> <span class="nav-text">2. Object Storage</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Configuration-Storage"><span class="nav-number">3.3.3.</span> <span class="nav-text">3. Configuration Storage</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Performance-Considerations"><span class="nav-number">3.4.</span> <span class="nav-text">Performance Considerations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#List"><span class="nav-number">4.</span> <span class="nav-text">List</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structures-1"><span class="nav-number">4.1.</span> <span class="nav-text">Underlying Data Structures</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Quicklist-Structure"><span class="nav-number">4.2.</span> <span class="nav-text">Quicklist Structure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-2"><span class="nav-number">4.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Message-Queues"><span class="nav-number">4.3.1.</span> <span class="nav-text">1. Message Queues</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Activity-Feeds"><span class="nav-number">4.3.2.</span> <span class="nav-text">2. Activity Feeds</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Undo-Redo-Functionality"><span class="nav-number">4.3.3.</span> <span class="nav-text">3. Undo&#x2F;Redo Functionality</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Performance-Optimization"><span class="nav-number">4.4.</span> <span class="nav-text">Performance Optimization</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Set"><span class="nav-number">5.</span> <span class="nav-text">Set</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structures-2"><span class="nav-number">5.1.</span> <span class="nav-text">Underlying Data Structures</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration"><span class="nav-number">5.2.</span> <span class="nav-text">Configuration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-3"><span class="nav-number">5.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Unique-Visitors-Tracking"><span class="nav-number">5.3.1.</span> <span class="nav-text">1. Unique Visitors Tracking</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Tag-Systems"><span class="nav-number">5.3.2.</span> <span class="nav-text">2. Tag Systems</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Social-Features"><span class="nav-number">5.3.3.</span> <span class="nav-text">3. Social Features</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Set-Operations-Showcase"><span class="nav-number">5.4.</span> <span class="nav-text">Set Operations Showcase</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Sorted-Set-ZSet"><span class="nav-number">6.</span> <span class="nav-text">Sorted Set (ZSet)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structures-3"><span class="nav-number">6.1.</span> <span class="nav-text">Underlying Data Structures</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Skip-List-Structure"><span class="nav-number">6.2.</span> <span class="nav-text">Skip List Structure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-4"><span class="nav-number">6.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Leaderboards"><span class="nav-number">6.3.1.</span> <span class="nav-text">1. Leaderboards</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Time-based-Data"><span class="nav-number">6.3.2.</span> <span class="nav-text">2. Time-based Data</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Priority-Queues"><span class="nav-number">6.3.3.</span> <span class="nav-text">3. Priority Queues</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advanced-Operations"><span class="nav-number">6.4.</span> <span class="nav-text">Advanced Operations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Bitmap"><span class="nav-number">7.</span> <span class="nav-text">Bitmap</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structure-String-with-Bit-Operations"><span class="nav-number">7.1.</span> <span class="nav-text">Underlying Data Structure: String with Bit Operations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-5"><span class="nav-number">7.2.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-User-Activity-Tracking"><span class="nav-number">7.2.1.</span> <span class="nav-text">1. User Activity Tracking</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Feature-Flags"><span class="nav-number">7.2.2.</span> <span class="nav-text">2. Feature Flags</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-A-B-Testing"><span class="nav-number">7.2.3.</span> <span class="nav-text">3. A&#x2F;B Testing</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bitmap-Operations"><span class="nav-number">7.3.</span> <span class="nav-text">Bitmap Operations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Memory-Efficiency"><span class="nav-number">7.4.</span> <span class="nav-text">Memory Efficiency</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#HyperLogLog"><span class="nav-number">8.</span> <span class="nav-text">HyperLogLog</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structure-Probabilistic-Counting"><span class="nav-number">8.1.</span> <span class="nav-text">Underlying Data Structure: Probabilistic Counting</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Algorithm-Principle"><span class="nav-number">8.2.</span> <span class="nav-text">Algorithm Principle</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-6"><span class="nav-number">8.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Unique-Visitors"><span class="nav-number">8.3.1.</span> <span class="nav-text">1. Unique Visitors</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Unique-Event-Counting"><span class="nav-number">8.3.2.</span> <span class="nav-text">2. Unique Event Counting</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Real-time-Analytics"><span class="nav-number">8.3.3.</span> <span class="nav-text">3. Real-time Analytics</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Accuracy-vs-Memory-Trade-off"><span class="nav-number">8.4.</span> <span class="nav-text">Accuracy vs. Memory Trade-off</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Stream"><span class="nav-number">9.</span> <span class="nav-text">Stream</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structure-Radix-Tree-Consumer-Groups"><span class="nav-number">9.1.</span> <span class="nav-text">Underlying Data Structure: Radix Tree + Consumer Groups</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream-Entry-Structure"><span class="nav-number">9.2.</span> <span class="nav-text">Stream Entry Structure</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-7"><span class="nav-number">9.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Event-Sourcing"><span class="nav-number">9.3.1.</span> <span class="nav-text">1. Event Sourcing</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Message-Queues-with-Consumer-Groups"><span class="nav-number">9.3.2.</span> <span class="nav-text">2. Message Queues with Consumer Groups</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Real-time-Data-Processing"><span class="nav-number">9.3.3.</span> <span class="nav-text">3. Real-time Data Processing</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Stream-Operations"><span class="nav-number">9.4.</span> <span class="nav-text">Stream Operations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Geospatial"><span class="nav-number">10.</span> <span class="nav-text">Geospatial</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Underlying-Data-Structure-Sorted-Set-with-Geohash"><span class="nav-number">10.1.</span> <span class="nav-text">Underlying Data Structure: Sorted Set with Geohash</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Geohash-Encoding"><span class="nav-number">10.2.</span> <span class="nav-text">Geohash Encoding</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Use-Cases-Best-Practices-8"><span class="nav-number">10.3.</span> <span class="nav-text">Use Cases &amp; Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Location-Services"><span class="nav-number">10.3.1.</span> <span class="nav-text">1. Location Services</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Delivery-Services"><span class="nav-number">10.3.2.</span> <span class="nav-text">2. Delivery Services</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Store-Locator"><span class="nav-number">10.3.3.</span> <span class="nav-text">3. Store Locator</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Advanced-Geospatial-Operations"><span class="nav-number">10.4.</span> <span class="nav-text">Advanced Geospatial Operations</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Memory-Optimization"><span class="nav-number">11.</span> <span class="nav-text">Memory Optimization</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Encoding-Optimizations"><span class="nav-number">11.1.</span> <span class="nav-text">Encoding Optimizations</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Configuration-Optimization"><span class="nav-number">11.2.</span> <span class="nav-text">Configuration Optimization</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Best-Practices"><span class="nav-number">11.3.</span> <span class="nav-text">Best Practices</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-Key-Design"><span class="nav-number">11.3.1.</span> <span class="nav-text">1. Key Design</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-Data-Type-Selection"><span class="nav-number">11.3.2.</span> <span class="nav-text">2. Data Type Selection</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-Memory-Monitoring"><span class="nav-number">11.3.3.</span> <span class="nav-text">3. Memory Monitoring</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Performance-Considerations-1"><span class="nav-number">12.</span> <span class="nav-text">Performance Considerations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Time-Complexity-by-Operation"><span class="nav-number">12.1.</span> <span class="nav-text">Time Complexity by Operation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pipelining-and-Batching"><span class="nav-number">12.2.</span> <span class="nav-text">Pipelining and Batching</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Connection-Pooling"><span class="nav-number">12.3.</span> <span class="nav-text">Connection Pooling</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Monitoring-and-Profiling"><span class="nav-number">12.4.</span> <span class="nav-text">Monitoring and Profiling</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Common-Interview-Questions-Answers"><span class="nav-number">13.</span> <span class="nav-text">Common Interview Questions &amp; Answers</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-%E2%80%9CHow-does-Redis-achieve-such-high-performance-%E2%80%9D"><span class="nav-number">13.1.</span> <span class="nav-text">1. “How does Redis achieve such high performance?”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-%E2%80%9CExplain-the-trade-offs-between-Redis-data-types%E2%80%9D"><span class="nav-number">13.2.</span> <span class="nav-text">2. “Explain the trade-offs between Redis data types”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-%E2%80%9CHow-would-you-design-a-real-time-leaderboard-%E2%80%9D"><span class="nav-number">13.3.</span> <span class="nav-text">3. “How would you design a real-time leaderboard?”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-%E2%80%9CHow-do-you-handle-Redis-memory-limitations-%E2%80%9D"><span class="nav-number">13.4.</span> <span class="nav-text">4. “How do you handle Redis memory limitations?”</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-%E2%80%9CExplain-Redis-persistence-options-and-their-trade-offs%E2%80%9D"><span class="nav-number">13.5.</span> <span class="nav-text">5. “Explain Redis persistence options and their trade-offs”</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Conclusion"><span class="nav-number">14.</span> <span class="nav-text">Conclusion</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Charlie Feng</p>
  <div class="site-description" itemprop="description">This place is for thinking and sharing.</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">35</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">6</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://shayne007.github.io/2025/06/09/Redis-Data-Types-and-Data-Structures-Complete-Guide/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Charlie Feng">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Charlie Feng's Tech Space">
      <meta itemprop="description" content="This place is for thinking and sharing.">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="Redis Data Types and Data Structures: Complete Guide | Charlie Feng's Tech Space">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Redis Data Types and Data Structures: Complete Guide
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>
      

      <time title="Created: 2025-06-09 21:40:29 / Modified: 22:45:29" itemprop="dateCreated datePublished" datetime="2025-06-09T21:40:29+08:00">2025-06-09</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/redis/" itemprop="url" rel="index"><span itemprop="name">redis</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>Redis (Remote Dictionary Server) is an in-memory data structure store that supports various data types. Understanding the underlying data structures is crucial for optimal performance and memory usage.</p>
<pre>
<code class="mermaid">
flowchart TD
A[Redis Data Types] --&gt; B[String]
A --&gt; C[Hash]
A --&gt; D[List]
A --&gt; E[Set]
A --&gt; F[Sorted Set]
A --&gt; G[Bitmap]
A --&gt; H[HyperLogLog]
A --&gt; I[Stream]
A --&gt; J[Geospatial]

B --&gt; B1[Simple Dynamic String - SDS]
C --&gt; C1[Hash Table &#x2F; Ziplist]
D --&gt; D1[Ziplist &#x2F; Quicklist]
E --&gt; E1[Hash Table &#x2F; Intset]
F --&gt; F1[Skiplist + Hash Table &#x2F; Ziplist]
</code>
</pre>

<p><strong>🎯 Interview Insight</strong>: Always mention that Redis uses different underlying data structures based on the size and type of data to optimize memory and performance.</p>
<hr>
<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><h3 id="Underlying-Data-Structure-Simple-Dynamic-String-SDS"><a href="#Underlying-Data-Structure-Simple-Dynamic-String-SDS" class="headerlink" title="Underlying Data Structure: Simple Dynamic String (SDS)"></a>Underlying Data Structure: Simple Dynamic String (SDS)</h3><p>Redis strings are built on Simple Dynamic Strings, not C strings. SDS provides several advantages:</p>
<ul>
<li><strong>Length caching</strong>: O(1) length operation</li>
<li><strong>Buffer overrun protection</strong>: Prevents buffer overflow</li>
<li><strong>Binary safe</strong>: Can store any binary data</li>
<li><strong>Space pre-allocation</strong>: Reduces memory reallocations</li>
</ul>
<h3 id="Structure-Layout"><a href="#Structure-Layout" class="headerlink" title="Structure Layout"></a>Structure Layout</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">sdshdr</span> &#123;</span></span><br><span class="line">    <span class="type">int</span> len;        <span class="comment">// String length</span></span><br><span class="line">    <span class="type">int</span> <span class="built_in">free</span>;       <span class="comment">// Available space</span></span><br><span class="line">    <span class="type">char</span> buf[];     <span class="comment">// Character array</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices"><a href="#Use-Cases-Best-Practices" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-Caching"><a href="#1-Caching" class="headerlink" title="1. Caching"></a>1. Caching</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Session storage</span></span><br><span class="line">SET user:1001:session <span class="string">&quot;eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...&quot;</span></span><br><span class="line">EXPIRE user:1001:session 3600</span><br><span class="line"></span><br><span class="line"><span class="comment"># Cache with compression</span></span><br><span class="line">SET article:123 <span class="string">&quot;compressed_json_data&quot;</span> EX 1800</span><br></pre></td></tr></table></figure>

<h4 id="2-Counters"><a href="#2-Counters" class="headerlink" title="2. Counters"></a>2. Counters</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Page views</span></span><br><span class="line">INCR page:home:views</span><br><span class="line">INCRBY user:1001:score 50</span><br><span class="line"></span><br><span class="line"><span class="comment"># Rate limiting</span></span><br><span class="line">SET rate_limit:user:1001 1 EX 60 NX</span><br></pre></td></tr></table></figure>

<h4 id="3-Distributed-Locks"><a href="#3-Distributed-Locks" class="headerlink" title="3. Distributed Locks"></a>3. Distributed Locks</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Acquire lock</span></span><br><span class="line">SET lock:resource:123 <span class="string">&quot;unique_token&quot;</span> EX 30 NX</span><br><span class="line"></span><br><span class="line"><span class="comment"># Release lock (Lua script)</span></span><br><span class="line"><span class="keyword">if</span> redis.call(<span class="string">&quot;get&quot;</span>, KEYS[1]) == ARGV[1] <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">return</span> redis.call(<span class="string">&quot;del&quot;</span>, KEYS[1])</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">return</span> 0</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<h3 id="Memory-Optimization-Tips"><a href="#Memory-Optimization-Tips" class="headerlink" title="Memory Optimization Tips"></a>Memory Optimization Tips</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use appropriate data types for numbers</span></span><br><span class="line">SET counter 42           <span class="comment"># Stored as string &quot;42&quot;</span></span><br><span class="line">SET counter:int 42       <span class="comment"># Better: use INCR for integers</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Compress large strings</span></span><br><span class="line">SET large:data <span class="string">&quot;gzip_compressed_data&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Explain that Redis optimizes integer strings (like “123”) by storing them as actual integers when possible, saving memory.</p>
<hr>
<h2 id="Hash"><a href="#Hash" class="headerlink" title="Hash"></a>Hash</h2><h3 id="Underlying-Data-Structures"><a href="#Underlying-Data-Structures" class="headerlink" title="Underlying Data Structures"></a>Underlying Data Structures</h3><p>Redis hashes use two different encodings based on configuration:</p>
<ol>
<li><strong>Ziplist</strong> (for small hashes)</li>
<li><strong>Hash Table</strong> (for larger hashes)</li>
</ol>
<pre>
<code class="mermaid">
flowchart LR
A[Hash] --&gt; B{Size Check}
B --&gt;|Small| C[Ziplist Encoding]
B --&gt;|Large| D[Hash Table Encoding]

C --&gt; C1[Sequential Storage]
C --&gt; C2[Memory Efficient]

D --&gt; D1[O（1） Access]
D --&gt; D2[Hash Collision Handling]
</code>
</pre>

<h3 id="Configuration-Thresholds"><a href="#Configuration-Thresholds" class="headerlink" title="Configuration Thresholds"></a>Configuration Thresholds</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis.conf settings</span></span><br><span class="line">hash-max-ziplist-entries 512    <span class="comment"># Max fields in ziplist</span></span><br><span class="line">hash-max-ziplist-value 64      <span class="comment"># Max value size in ziplist</span></span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices-1"><a href="#Use-Cases-Best-Practices-1" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-User-Profiles"><a href="#1-User-Profiles" class="headerlink" title="1. User Profiles"></a>1. User Profiles</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># User data storage</span></span><br><span class="line">HSET user:1001 name <span class="string">&quot;John Doe&quot;</span> email <span class="string">&quot;john@example.com&quot;</span> age 30</span><br><span class="line">HMGET user:1001 name email</span><br><span class="line">HINCRBY user:1001 login_count 1</span><br></pre></td></tr></table></figure>

<h4 id="2-Object-Storage"><a href="#2-Object-Storage" class="headerlink" title="2. Object Storage"></a>2. Object Storage</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Product catalog</span></span><br><span class="line">HSET product:123 name <span class="string">&quot;Laptop&quot;</span> price 999.99 stock 50 category <span class="string">&quot;electronics&quot;</span></span><br><span class="line">HGETALL product:123</span><br></pre></td></tr></table></figure>

<h4 id="3-Configuration-Storage"><a href="#3-Configuration-Storage" class="headerlink" title="3. Configuration Storage"></a>3. Configuration Storage</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Application settings</span></span><br><span class="line">HSET app:config db_host <span class="string">&quot;localhost&quot;</span> db_port 5432 cache_ttl 3600</span><br><span class="line">HGET app:config db_host</span><br></pre></td></tr></table></figure>

<h3 id="Performance-Considerations"><a href="#Performance-Considerations" class="headerlink" title="Performance Considerations"></a>Performance Considerations</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Efficient batch operations</span></span><br><span class="line">HMSET user:1001 field1 value1 field2 value2 field3 value3</span><br><span class="line"></span><br><span class="line"><span class="comment"># Avoid large hashes (&gt;1000 fields)</span></span><br><span class="line"><span class="comment"># Better: Split into multiple hashes</span></span><br><span class="line">HSET user:1001:profile name <span class="string">&quot;John&quot;</span> email <span class="string">&quot;john@example.com&quot;</span></span><br><span class="line">HSET user:1001:prefs theme <span class="string">&quot;dark&quot;</span> lang <span class="string">&quot;en&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Mention that ziplist encoding provides significant memory savings (up to 10x) for small hashes, but switching to hash table occurs automatically when thresholds are exceeded.</p>
<hr>
<h2 id="List"><a href="#List" class="headerlink" title="List"></a>List</h2><h3 id="Underlying-Data-Structures-1"><a href="#Underlying-Data-Structures-1" class="headerlink" title="Underlying Data Structures"></a>Underlying Data Structures</h3><p>Redis lists evolved through different implementations:</p>
<ol>
<li><strong>Ziplist</strong> (Redis &lt; 3.2, for small lists)</li>
<li><strong>Linked List</strong> (Redis &lt; 3.2, for large lists)</li>
<li><strong>Quicklist</strong> (Redis &gt;&#x3D; 3.2, hybrid approach)</li>
</ol>
<pre>
<code class="mermaid">
flowchart TD
A[List Evolution] --&gt; B[Redis &lt; 3.2]
A --&gt; C[Redis &gt;&#x3D; 3.2]

B --&gt; B1[Ziplist - Small Lists]
B --&gt; B2[Linked List - Large Lists]

C --&gt; C1[Quicklist]
C1 --&gt; C2[Doubly Linked List of Ziplists]
C2 --&gt; C3[Balanced Memory vs Performance]
</code>
</pre>

<h3 id="Quicklist-Structure"><a href="#Quicklist-Structure" class="headerlink" title="Quicklist Structure"></a>Quicklist Structure</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">quicklist</span> &#123;</span></span><br><span class="line">    quicklistNode *head;</span><br><span class="line">    quicklistNode *tail;</span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> count;    <span class="comment">// Total elements</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">long</span> len;      <span class="comment">// Number of nodes</span></span><br><span class="line">&#125; quicklist;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">quicklistNode</span> &#123;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">quicklistNode</span> *<span class="title">prev</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">quicklistNode</span> *<span class="title">next</span>;</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">char</span> *zl;      <span class="comment">// Ziplist</span></span><br><span class="line">    <span class="type">unsigned</span> <span class="type">int</span> sz;        <span class="comment">// Ziplist size</span></span><br><span class="line">&#125; quicklistNode;</span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices-2"><a href="#Use-Cases-Best-Practices-2" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-Message-Queues"><a href="#1-Message-Queues" class="headerlink" title="1. Message Queues"></a>1. Message Queues</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Producer</span></span><br><span class="line">LPUSH queue:emails <span class="string">&quot;email1@example.com&quot;</span></span><br><span class="line">LPUSH queue:emails <span class="string">&quot;email2@example.com&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Consumer</span></span><br><span class="line">BRPOP queue:emails 0  <span class="comment"># Blocking pop</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Activity-Feeds"><a href="#2-Activity-Feeds" class="headerlink" title="2. Activity Feeds"></a>2. Activity Feeds</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add new activity</span></span><br><span class="line">LPUSH user:1001:feed <span class="string">&quot;User liked post 123&quot;</span></span><br><span class="line">LTRIM user:1001:feed 0 99  <span class="comment"># Keep latest 100 items</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get recent activities</span></span><br><span class="line">LRANGE user:1001:feed 0 9  <span class="comment"># Get latest 10</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Undo-Redo-Functionality"><a href="#3-Undo-Redo-Functionality" class="headerlink" title="3. Undo&#x2F;Redo Functionality"></a>3. Undo&#x2F;Redo Functionality</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Save state</span></span><br><span class="line">LPUSH user:1001:undo_stack <span class="string">&quot;state_data&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Undo operation</span></span><br><span class="line">LPOP user:1001:undo_stack</span><br></pre></td></tr></table></figure>

<h3 id="Performance-Optimization"><a href="#Performance-Optimization" class="headerlink" title="Performance Optimization"></a>Performance Optimization</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Efficient pagination</span></span><br><span class="line">LRANGE articles:recent 0 19    <span class="comment"># First page (0-19)</span></span><br><span class="line">LRANGE articles:recent 20 39   <span class="comment"># Second page (20-39)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Avoid LINDEX on large lists (O(n) operation)</span></span><br><span class="line"><span class="comment"># Better: Use LRANGE for multiple elements</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Explain that LPUSH&#x2F;LPOP and RPUSH&#x2F;RPOP are O(1) operations, while LINDEX and LINSERT are O(n). This makes Redis lists perfect for stacks and queues but not for random access.</p>
<hr>
<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><h3 id="Underlying-Data-Structures-2"><a href="#Underlying-Data-Structures-2" class="headerlink" title="Underlying Data Structures"></a>Underlying Data Structures</h3><p>Sets use two different encodings:</p>
<ol>
<li><strong>Intset</strong> (for sets containing only integers)</li>
<li><strong>Hash Table</strong> (for other cases)</li>
</ol>
<pre>
<code class="mermaid">
flowchart LR
A[Set] --&gt; B{All Integers?}
B --&gt;|Yes &amp; Small| C[Intset Encoding]
B --&gt;|No or Large| D[Hash Table Encoding]

C --&gt; C1[Sorted Array]
C --&gt; C2[Binary Search]
C --&gt; C3[Memory Efficient]

D --&gt; D1[Hash Table]
D --&gt; D2[O（1） Operations]
D --&gt; D3[Any Data Type]
</code>
</pre>

<h3 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis.conf</span></span><br><span class="line">set-max-intset-entries 512  <span class="comment"># Max elements in intset</span></span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices-3"><a href="#Use-Cases-Best-Practices-3" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-Unique-Visitors-Tracking"><a href="#1-Unique-Visitors-Tracking" class="headerlink" title="1. Unique Visitors Tracking"></a>1. Unique Visitors Tracking</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add visitors</span></span><br><span class="line">SADD page:home:visitors user:1001 user:1002 user:1003</span><br><span class="line"></span><br><span class="line"><span class="comment"># Count unique visitors</span></span><br><span class="line">SCARD page:home:visitors</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if user visited</span></span><br><span class="line">SISMEMBER page:home:visitors user:1001</span><br></pre></td></tr></table></figure>

<h4 id="2-Tag-Systems"><a href="#2-Tag-Systems" class="headerlink" title="2. Tag Systems"></a>2. Tag Systems</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Article tags</span></span><br><span class="line">SADD article:123:tags <span class="string">&quot;python&quot;</span> <span class="string">&quot;redis&quot;</span> <span class="string">&quot;database&quot;</span></span><br><span class="line">SADD article:456:tags <span class="string">&quot;python&quot;</span> <span class="string">&quot;flask&quot;</span> <span class="string">&quot;web&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find articles with common tags</span></span><br><span class="line">SINTER article:123:tags article:456:tags  <span class="comment"># Returns: python</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Social-Features"><a href="#3-Social-Features" class="headerlink" title="3. Social Features"></a>3. Social Features</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Following/Followers</span></span><br><span class="line">SADD user:1001:following user:1002 user:1003</span><br><span class="line">SADD user:1002:followers user:1001</span><br><span class="line"></span><br><span class="line"><span class="comment"># Mutual friends</span></span><br><span class="line">SINTER user:1001:following user:1002:following</span><br></pre></td></tr></table></figure>

<h3 id="Set-Operations-Showcase"><a href="#Set-Operations-Showcase" class="headerlink" title="Set Operations Showcase"></a>Set Operations Showcase</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Union - All unique elements</span></span><br><span class="line">SADD set1 <span class="string">&quot;a&quot;</span> <span class="string">&quot;b&quot;</span> <span class="string">&quot;c&quot;</span></span><br><span class="line">SADD set2 <span class="string">&quot;c&quot;</span> <span class="string">&quot;d&quot;</span> <span class="string">&quot;e&quot;</span></span><br><span class="line">SUNION set1 set2  <span class="comment"># Result: a, b, c, d, e</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Intersection - Common elements</span></span><br><span class="line">SINTER set1 set2  <span class="comment"># Result: c</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Difference - Elements in set1 but not in set2</span></span><br><span class="line">SDIFF set1 set2   <span class="comment"># Result: a, b</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Emphasize that intset encoding can save significant memory for integer sets, and Redis automatically chooses the optimal encoding based on data characteristics.</p>
<hr>
<h2 id="Sorted-Set-ZSet"><a href="#Sorted-Set-ZSet" class="headerlink" title="Sorted Set (ZSet)"></a>Sorted Set (ZSet)</h2><h3 id="Underlying-Data-Structures-3"><a href="#Underlying-Data-Structures-3" class="headerlink" title="Underlying Data Structures"></a>Underlying Data Structures</h3><p>Sorted Sets use a sophisticated dual data structure approach:</p>
<ol>
<li><strong>Hash Table</strong> - Maps members to scores (O(1) member lookup)</li>
<li><strong>Skip List</strong> - Maintains sorted order (O(log n) range operations)</li>
</ol>
<p>For small sorted sets, <strong>Ziplist</strong> encoding is used instead.</p>
<pre>
<code class="mermaid">
flowchart TD
A[Sorted Set] --&gt; B{Size Check}
B --&gt;|Small| C[Ziplist Encoding]
B --&gt;|Large| D[Skip List + Hash Table]

D --&gt; D1[Skip List]
D --&gt; D2[Hash Table]

D1 --&gt; D3[Sorted Range Queries]
D1 --&gt; D4[O（log n） Insert&#x2F;Delete]

D2 --&gt; D5[O（1） Score Lookup]
D2 --&gt; D6[O（1） Member Check]
</code>
</pre>

<h3 id="Skip-List-Structure"><a href="#Skip-List-Structure" class="headerlink" title="Skip List Structure"></a>Skip List Structure</h3><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistNode</span> &#123;</span></span><br><span class="line">    sds ele;                    <span class="comment">// Member</span></span><br><span class="line">    <span class="type">double</span> score;               <span class="comment">// Score</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistNode</span> *<span class="title">backward</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistLevel</span> &#123;</span></span><br><span class="line">        <span class="class"><span class="keyword">struct</span> <span class="title">zskiplistNode</span> *<span class="title">forward</span>;</span></span><br><span class="line">        <span class="type">unsigned</span> <span class="type">long</span> span;     <span class="comment">// Number of nodes to next</span></span><br><span class="line">    &#125; level[];</span><br><span class="line">&#125; zskiplistNode;</span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices-4"><a href="#Use-Cases-Best-Practices-4" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-Leaderboards"><a href="#1-Leaderboards" class="headerlink" title="1. Leaderboards"></a>1. Leaderboards</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Gaming leaderboard</span></span><br><span class="line">ZADD game:leaderboard 1500 <span class="string">&quot;player1&quot;</span> 1200 <span class="string">&quot;player2&quot;</span> 1800 <span class="string">&quot;player3&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Top 10 players</span></span><br><span class="line">ZREVRANGE game:leaderboard 0 9 WITHSCORES</span><br><span class="line"></span><br><span class="line"><span class="comment"># Player rank</span></span><br><span class="line">ZREVRANK game:leaderboard <span class="string">&quot;player1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Update score</span></span><br><span class="line">ZINCRBY game:leaderboard 100 <span class="string">&quot;player1&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Time-based-Data"><a href="#2-Time-based-Data" class="headerlink" title="2. Time-based Data"></a>2. Time-based Data</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Recent articles (using timestamp as score)</span></span><br><span class="line">ZADD articles:recent 1640995200 <span class="string">&quot;article:123&quot;</span> 1640995300 <span class="string">&quot;article:124&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get articles from last hour</span></span><br><span class="line">ZRANGEBYSCORE articles:recent $(<span class="built_in">date</span> -d <span class="string">&quot;1 hour ago&quot;</span> +%s) +inf</span><br></pre></td></tr></table></figure>

<h4 id="3-Priority-Queues"><a href="#3-Priority-Queues" class="headerlink" title="3. Priority Queues"></a>3. Priority Queues</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Task queue with priorities</span></span><br><span class="line">ZADD task:queue 1 <span class="string">&quot;low_priority_task&quot;</span> 5 <span class="string">&quot;high_priority_task&quot;</span> 3 <span class="string">&quot;medium_task&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Process highest priority task</span></span><br><span class="line">ZPOPMAX task:queue</span><br></pre></td></tr></table></figure>

<h3 id="Advanced-Operations"><a href="#Advanced-Operations" class="headerlink" title="Advanced Operations"></a>Advanced Operations</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Range by score</span></span><br><span class="line">ZRANGEBYSCORE game:leaderboard 1000 2000 WITHSCORES</span><br><span class="line"></span><br><span class="line"><span class="comment"># Count elements in score range</span></span><br><span class="line">ZCOUNT game:leaderboard 1000 2000</span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove by rank</span></span><br><span class="line">ZREMRANGEBYRANK game:leaderboard 0 -11  <span class="comment"># Keep only top 10</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Lexicographical operations (when scores are equal)</span></span><br><span class="line">ZRANGEBYLEX myset <span class="string">&quot;[a&quot;</span> <span class="string">&quot;[z&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Explain why Redis uses both skip list and hash table - skip list for range operations and hash table for direct member access. This dual structure makes sorted sets extremely versatile.</p>
<hr>
<h2 id="Bitmap"><a href="#Bitmap" class="headerlink" title="Bitmap"></a>Bitmap</h2><h3 id="Underlying-Data-Structure-String-with-Bit-Operations"><a href="#Underlying-Data-Structure-String-with-Bit-Operations" class="headerlink" title="Underlying Data Structure: String with Bit Operations"></a>Underlying Data Structure: String with Bit Operations</h3><p>Bitmaps in Redis are actually strings that support bit-level operations. Each bit can represent a boolean state for a specific ID or position.</p>
<pre>
<code class="mermaid">
flowchart LR
A[Bitmap] --&gt; B[String Representation]
B --&gt; C[Bit Position 0]
B --&gt; D[Bit Position 1]
B --&gt; E[Bit Position 2]
B --&gt; F[... Bit Position N]

C --&gt; C1[User ID 1]
D --&gt; D1[User ID 2]
E --&gt; E1[User ID 3]
F --&gt; F1[User ID N+1]
</code>
</pre>

<h3 id="Use-Cases-Best-Practices-5"><a href="#Use-Cases-Best-Practices-5" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-User-Activity-Tracking"><a href="#1-User-Activity-Tracking" class="headerlink" title="1. User Activity Tracking"></a>1. User Activity Tracking</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Daily active users (bit position = user ID)</span></span><br><span class="line">SETBIT daily_active:2024-01-15 1001 1  <span class="comment"># User 1001 was active</span></span><br><span class="line">SETBIT daily_active:2024-01-15 1002 1  <span class="comment"># User 1002 was active</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check if user was active</span></span><br><span class="line">GETBIT daily_active:2024-01-15 1001</span><br><span class="line"></span><br><span class="line"><span class="comment"># Count active users</span></span><br><span class="line">BITCOUNT daily_active:2024-01-15</span><br></pre></td></tr></table></figure>

<h4 id="2-Feature-Flags"><a href="#2-Feature-Flags" class="headerlink" title="2. Feature Flags"></a>2. Feature Flags</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Feature availability (bit position = feature ID)</span></span><br><span class="line">SETBIT user:1001:features 0 1  <span class="comment"># Feature 0 enabled</span></span><br><span class="line">SETBIT user:1001:features 2 1  <span class="comment"># Feature 2 enabled</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Check feature access</span></span><br><span class="line">GETBIT user:1001:features 0</span><br></pre></td></tr></table></figure>

<h4 id="3-A-B-Testing"><a href="#3-A-B-Testing" class="headerlink" title="3. A&#x2F;B Testing"></a>3. A&#x2F;B Testing</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Test group assignment</span></span><br><span class="line">SETBIT experiment:feature_x:group_a 1001 1</span><br><span class="line">SETBIT experiment:feature_x:group_b 1002 1</span><br><span class="line"></span><br><span class="line"><span class="comment"># Users in both experiments</span></span><br><span class="line">BITOP AND result experiment:feature_x:group_a experiment:other_experiment</span><br></pre></td></tr></table></figure>

<h3 id="Bitmap-Operations"><a href="#Bitmap-Operations" class="headerlink" title="Bitmap Operations"></a>Bitmap Operations</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Bitwise operations</span></span><br><span class="line">BITOP AND result key1 key2        <span class="comment"># Intersection</span></span><br><span class="line">BITOP OR result key1 key2         <span class="comment"># Union</span></span><br><span class="line">BITOP XOR result key1 key2        <span class="comment"># Exclusive OR</span></span><br><span class="line">BITOP NOT result key1             <span class="comment"># Complement</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find first bit</span></span><br><span class="line">BITPOS daily_active:2024-01-15 1  <span class="comment"># First active user</span></span><br><span class="line">BITPOS daily_active:2024-01-15 0  <span class="comment"># First inactive user</span></span><br></pre></td></tr></table></figure>

<h3 id="Memory-Efficiency"><a href="#Memory-Efficiency" class="headerlink" title="Memory Efficiency"></a>Memory Efficiency</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Memory usage example</span></span><br><span class="line"><span class="comment"># Traditional set for 1 million users: ~32MB</span></span><br><span class="line"><span class="comment"># Bitmap for 1 million users: ~125KB (if sparse, much less)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For user ID 1000000</span></span><br><span class="line">SETBIT <span class="built_in">users</span>:active 1000000 1  <span class="comment"># Uses ~125KB total</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Bitmaps are extremely memory-efficient for representing large sparse boolean datasets. One million users can be represented in just 125KB instead of several megabytes with other data structures.</p>
<hr>
<h2 id="HyperLogLog"><a href="#HyperLogLog" class="headerlink" title="HyperLogLog"></a>HyperLogLog</h2><h3 id="Underlying-Data-Structure-Probabilistic-Counting"><a href="#Underlying-Data-Structure-Probabilistic-Counting" class="headerlink" title="Underlying Data Structure: Probabilistic Counting"></a>Underlying Data Structure: Probabilistic Counting</h3><p>HyperLogLog uses probabilistic algorithms to estimate cardinality (unique count) with minimal memory usage.</p>
<pre>
<code class="mermaid">
flowchart TD
A[HyperLogLog] --&gt; B[Hash Function]
B --&gt; C[Leading Zeros Count]
C --&gt; D[Bucket Assignment]
D --&gt; E[Cardinality Estimation]

E --&gt; E1[Standard Error: 0.81%]
E --&gt; E2[Memory Usage: 12KB]
E --&gt; E3[Max Cardinality: 2^64]
</code>
</pre>

<h3 id="Algorithm-Principle"><a href="#Algorithm-Principle" class="headerlink" title="Algorithm Principle"></a>Algorithm Principle</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Simplified algorithm:</span></span><br><span class="line"><span class="comment"># 1. Hash each element</span></span><br><span class="line"><span class="comment"># 2. Count leading zeros in binary representation</span></span><br><span class="line"><span class="comment"># 3. Use bucket system for better accuracy</span></span><br><span class="line"><span class="comment"># 4. Apply harmonic mean for final estimation</span></span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices-6"><a href="#Use-Cases-Best-Practices-6" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-Unique-Visitors"><a href="#1-Unique-Visitors" class="headerlink" title="1. Unique Visitors"></a>1. Unique Visitors</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add page visitors</span></span><br><span class="line">PFADD page:home:unique_visitors user:1001 user:1002 user:1001</span><br><span class="line"></span><br><span class="line"><span class="comment"># Count unique visitors (approximate)</span></span><br><span class="line">PFCOUNT page:home:unique_visitors</span><br><span class="line"></span><br><span class="line"><span class="comment"># Merge multiple HyperLogLogs</span></span><br><span class="line">PFMERGE daily:unique_visitors page:home:unique_visitors page:about:unique_visitors</span><br></pre></td></tr></table></figure>

<h4 id="2-Unique-Event-Counting"><a href="#2-Unique-Event-Counting" class="headerlink" title="2. Unique Event Counting"></a>2. Unique Event Counting</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Track unique events</span></span><br><span class="line">PFADD events:login user:1001 user:1002 user:1003</span><br><span class="line">PFADD events:purchase user:1001 user:1004</span><br><span class="line"></span><br><span class="line"><span class="comment"># Count unique users who performed any action</span></span><br><span class="line">PFMERGE events:total events:login events:purchase</span><br><span class="line">PFCOUNT events:total</span><br></pre></td></tr></table></figure>

<h4 id="3-Real-time-Analytics"><a href="#3-Real-time-Analytics" class="headerlink" title="3. Real-time Analytics"></a>3. Real-time Analytics</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Hourly unique visitors</span></span><br><span class="line">PFADD stats:$(<span class="built_in">date</span> +%Y%m%d%H):unique visitor_id_1 visitor_id_2</span><br><span class="line"></span><br><span class="line"><span class="comment"># Daily aggregation</span></span><br><span class="line"><span class="keyword">for</span> hour <span class="keyword">in</span> &#123;00..23&#125;; <span class="keyword">do</span></span><br><span class="line">    PFMERGE stats:$(<span class="built_in">date</span> +%Y%m%d):unique stats:$(<span class="built_in">date</span> +%Y%m%d)<span class="variable">$&#123;hour&#125;</span>:unique</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure>

<h3 id="Accuracy-vs-Memory-Trade-off"><a href="#Accuracy-vs-Memory-Trade-off" class="headerlink" title="Accuracy vs. Memory Trade-off"></a>Accuracy vs. Memory Trade-off</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># HyperLogLog: 12KB for any cardinality up to 2^64</span></span><br><span class="line"><span class="comment"># Set: 1GB+ for 10 million unique elements</span></span><br><span class="line"><span class="comment"># Error rate: 0.81% standard error</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example comparison:</span></span><br><span class="line"><span class="comment"># Counting 10M unique users:</span></span><br><span class="line"><span class="comment"># - Set: ~320MB memory, 100% accuracy</span></span><br><span class="line"><span class="comment"># - HyperLogLog: 12KB memory, 99.19% accuracy</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: HyperLogLog trades a small amount of accuracy (0.81% standard error) for tremendous memory savings. It’s perfect for analytics where approximate counts are acceptable.</p>
<hr>
<h2 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h2><h3 id="Underlying-Data-Structure-Radix-Tree-Consumer-Groups"><a href="#Underlying-Data-Structure-Radix-Tree-Consumer-Groups" class="headerlink" title="Underlying Data Structure: Radix Tree + Consumer Groups"></a>Underlying Data Structure: Radix Tree + Consumer Groups</h3><p>Redis Streams use a radix tree (compressed trie) to store entries efficiently, with additional structures for consumer group management.</p>
<pre>
<code class="mermaid">
flowchart TD
A[Stream] --&gt; B[Radix Tree]
A --&gt; C[Consumer Groups]

B --&gt; B1[Stream Entries]
B --&gt; B2[Time-ordered IDs]
B --&gt; B3[Field-Value Pairs]

C --&gt; C1[Consumer Group State]
C --&gt; C2[Pending Entries List - PEL]
C --&gt; C3[Consumer Last Delivered ID]
</code>
</pre>

<h3 id="Stream-Entry-Structure"><a href="#Stream-Entry-Structure" class="headerlink" title="Stream Entry Structure"></a>Stream Entry Structure</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Stream ID format: timestamp-sequence</span></span><br><span class="line"><span class="comment"># Example: 1640995200000-0</span></span><br><span class="line"><span class="comment">#          |-------------|--- |</span></span><br><span class="line"><span class="comment">#          timestamp(ms)     sequence</span></span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices-7"><a href="#Use-Cases-Best-Practices-7" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-Event-Sourcing"><a href="#1-Event-Sourcing" class="headerlink" title="1. Event Sourcing"></a>1. Event Sourcing</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add events to stream</span></span><br><span class="line">XADD user:1001:events * action <span class="string">&quot;login&quot;</span> timestamp 1640995200 ip <span class="string">&quot;192.168.1.1&quot;</span></span><br><span class="line">XADD user:1001:events * action <span class="string">&quot;purchase&quot;</span> item <span class="string">&quot;laptop&quot;</span> amount 999.99</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read events</span></span><br><span class="line">XRANGE user:1001:events - + COUNT 10</span><br></pre></td></tr></table></figure>

<h4 id="2-Message-Queues-with-Consumer-Groups"><a href="#2-Message-Queues-with-Consumer-Groups" class="headerlink" title="2. Message Queues with Consumer Groups"></a>2. Message Queues with Consumer Groups</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create consumer group</span></span><br><span class="line">XGROUP CREATE mystream mygroup $ MKSTREAM</span><br><span class="line"></span><br><span class="line"><span class="comment"># Add messages</span></span><br><span class="line">XADD mystream * task <span class="string">&quot;process_order&quot;</span> order_id 12345</span><br><span class="line"></span><br><span class="line"><span class="comment"># Consume messages</span></span><br><span class="line">XREADGROUP GROUP mygroup consumer1 COUNT 1 STREAMS mystream &gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Acknowledge processing</span></span><br><span class="line">XACK mystream mygroup 1640995200000-0</span><br></pre></td></tr></table></figure>

<h4 id="3-Real-time-Data-Processing"><a href="#3-Real-time-Data-Processing" class="headerlink" title="3. Real-time Data Processing"></a>3. Real-time Data Processing</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># IoT sensor data</span></span><br><span class="line">XADD sensors:temperature * sensor_id <span class="string">&quot;temp001&quot;</span> value 23.5 location <span class="string">&quot;room1&quot;</span></span><br><span class="line">XADD sensors:humidity * sensor_id <span class="string">&quot;hum001&quot;</span> value 45.2 location <span class="string">&quot;room1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Read latest data</span></span><br><span class="line">XREAD COUNT 10 STREAMS sensors:temperature sensors:humidity $ $</span><br></pre></td></tr></table></figure>

<h3 id="Stream-Operations"><a href="#Stream-Operations" class="headerlink" title="Stream Operations"></a>Stream Operations</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Range queries</span></span><br><span class="line">XRANGE mystream 1640995200000 1640998800000  <span class="comment"># Time range</span></span><br><span class="line">XREVRANGE mystream + - COUNT 10               <span class="comment"># Latest 10 entries</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Consumer group management</span></span><br><span class="line">XGROUP CREATE mystream group1 0              <span class="comment"># Create group</span></span><br><span class="line">XINFO GROUPS mystream                        <span class="comment"># Group info</span></span><br><span class="line">XPENDING mystream group1                     <span class="comment"># Pending messages</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Stream maintenance</span></span><br><span class="line">XTRIM mystream MAXLEN ~ 1000                 <span class="comment"># Keep ~1000 entries</span></span><br><span class="line">XDEL mystream 1640995200000-0                <span class="comment"># Delete specific entry</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Streams provide at-least-once delivery guarantees through the Pending Entries List (PEL), making them suitable for reliable message processing unlike simple pub&#x2F;sub.</p>
<hr>
<h2 id="Geospatial"><a href="#Geospatial" class="headerlink" title="Geospatial"></a>Geospatial</h2><h3 id="Underlying-Data-Structure-Sorted-Set-with-Geohash"><a href="#Underlying-Data-Structure-Sorted-Set-with-Geohash" class="headerlink" title="Underlying Data Structure: Sorted Set with Geohash"></a>Underlying Data Structure: Sorted Set with Geohash</h3><p>Redis geospatial features are built on top of sorted sets, using geohash as scores to enable spatial queries.</p>
<pre>
<code class="mermaid">
flowchart LR
A[Geospatial] --&gt; B[Sorted Set Backend]
B --&gt; C[Geohash as Score]
C --&gt; D[Spatial Queries]

D --&gt; D1[GEORADIUS]
D --&gt; D2[GEODIST]
D --&gt; D3[GEOPOS]
D --&gt; D4[GEOHASH]
</code>
</pre>

<h3 id="Geohash-Encoding"><a href="#Geohash-Encoding" class="headerlink" title="Geohash Encoding"></a>Geohash Encoding</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Latitude/Longitude -&gt; Geohash -&gt; 52-bit integer</span></span><br><span class="line"><span class="comment"># Example: (37.7749, -122.4194) -&gt; 9q8yy -&gt; score for sorted set</span></span><br></pre></td></tr></table></figure>

<h3 id="Use-Cases-Best-Practices-8"><a href="#Use-Cases-Best-Practices-8" class="headerlink" title="Use Cases &amp; Best Practices"></a>Use Cases &amp; Best Practices</h3><h4 id="1-Location-Services"><a href="#1-Location-Services" class="headerlink" title="1. Location Services"></a>1. Location Services</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add locations</span></span><br><span class="line">GEOADD locations -122.4194 37.7749 <span class="string">&quot;San Francisco&quot;</span></span><br><span class="line">GEOADD locations -74.0060 40.7128 <span class="string">&quot;New York&quot;</span></span><br><span class="line">GEOADD locations -87.6298 41.8781 <span class="string">&quot;Chicago&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find nearby locations</span></span><br><span class="line">GEORADIUS locations -122.4194 37.7749 100 km WITHDIST WITHCOORD</span><br><span class="line"></span><br><span class="line"><span class="comment"># Distance between locations</span></span><br><span class="line">GEODIST locations <span class="string">&quot;San Francisco&quot;</span> <span class="string">&quot;New York&quot;</span> km</span><br></pre></td></tr></table></figure>

<h4 id="2-Delivery-Services"><a href="#2-Delivery-Services" class="headerlink" title="2. Delivery Services"></a>2. Delivery Services</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add delivery drivers</span></span><br><span class="line">GEOADD drivers -122.4094 37.7849 <span class="string">&quot;driver:1001&quot;</span></span><br><span class="line">GEOADD drivers -122.4294 37.7649 <span class="string">&quot;driver:1002&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find nearby drivers</span></span><br><span class="line">GEORADIUS drivers -122.4194 37.7749 5 km WITHCOORD ASC</span><br><span class="line"></span><br><span class="line"><span class="comment"># Update driver location</span></span><br><span class="line">GEOADD drivers -122.4150 37.7800 <span class="string">&quot;driver:1001&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Store-Locator"><a href="#3-Store-Locator" class="headerlink" title="3. Store Locator"></a>3. Store Locator</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Add store locations</span></span><br><span class="line">GEOADD stores -122.4194 37.7749 <span class="string">&quot;store:sf_downtown&quot;</span></span><br><span class="line">GEOADD stores -122.4094 37.7849 <span class="string">&quot;store:sf_mission&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Find stores by area</span></span><br><span class="line">GEORADIUSBYMEMBER stores <span class="string">&quot;store:sf_downtown&quot;</span> 10 km WITHCOORD</span><br></pre></td></tr></table></figure>

<h3 id="Advanced-Geospatial-Operations"><a href="#Advanced-Geospatial-Operations" class="headerlink" title="Advanced Geospatial Operations"></a>Advanced Geospatial Operations</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Get coordinates</span></span><br><span class="line">GEOPOS locations <span class="string">&quot;San Francisco&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get geohash</span></span><br><span class="line">GEOHASH locations <span class="string">&quot;San Francisco&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Since it&#x27;s built on sorted sets, you can use:</span></span><br><span class="line">ZRANGE locations 0 -1              <span class="comment"># All locations</span></span><br><span class="line">ZREM locations <span class="string">&quot;San Francisco&quot;</span>     <span class="comment"># Remove location</span></span><br><span class="line">ZCARD locations                    <span class="comment"># Count locations</span></span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Redis geospatial commands are syntactic sugar over sorted set operations. Understanding this helps explain why you can mix geospatial and sorted set commands on the same key.</p>
<hr>
<h2 id="Memory-Optimization"><a href="#Memory-Optimization" class="headerlink" title="Memory Optimization"></a>Memory Optimization</h2><h3 id="Encoding-Optimizations"><a href="#Encoding-Optimizations" class="headerlink" title="Encoding Optimizations"></a>Encoding Optimizations</h3><p>Redis automatically chooses optimal encodings based on data characteristics:</p>
<pre>
<code class="mermaid">
flowchart TD
A[Memory Optimization] --&gt; B[Automatic Encoding Selection]
A --&gt; C[Configuration Tuning]
A --&gt; D[Data Structure Design]

B --&gt; B1[ziplist for small collections]
B --&gt; B2[intset for integer sets]
B --&gt; B3[embstr for small strings]

C --&gt; C1[hash-max-ziplist-entries]
C --&gt; C2[set-max-intset-entries]
C --&gt; C3[zset-max-ziplist-entries]

D --&gt; D1[Key naming patterns]
D --&gt; D2[Appropriate data types]
D --&gt; D3[Expiration policies]
</code>
</pre>

<h3 id="Configuration-Optimization"><a href="#Configuration-Optimization" class="headerlink" title="Configuration Optimization"></a>Configuration Optimization</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># redis.conf optimizations</span></span><br><span class="line">hash-max-ziplist-entries 512</span><br><span class="line">hash-max-ziplist-value 64</span><br><span class="line">list-max-ziplist-size -2</span><br><span class="line">set-max-intset-entries 512</span><br><span class="line">zset-max-ziplist-entries 128</span><br><span class="line">zset-max-ziplist-value 64</span><br><span class="line"></span><br><span class="line"><span class="comment"># Memory usage analysis</span></span><br><span class="line">MEMORY USAGE mykey</span><br><span class="line">MEMORY DOCTOR</span><br><span class="line">INFO memory</span><br></pre></td></tr></table></figure>

<h3 id="Best-Practices"><a href="#Best-Practices" class="headerlink" title="Best Practices"></a>Best Practices</h3><h4 id="1-Key-Design"><a href="#1-Key-Design" class="headerlink" title="1. Key Design"></a>1. Key Design</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Bad: Long descriptive keys</span></span><br><span class="line">SET user:profile:information:personal:name:first <span class="string">&quot;John&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Good: Short, structured keys</span></span><br><span class="line">SET u:1001:fname <span class="string">&quot;John&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Use hash for related data</span></span><br><span class="line">HSET u:1001 fname <span class="string">&quot;John&quot;</span> lname <span class="string">&quot;Doe&quot;</span> email <span class="string">&quot;john@example.com&quot;</span></span><br></pre></td></tr></table></figure>

<h4 id="2-Data-Type-Selection"><a href="#2-Data-Type-Selection" class="headerlink" title="2. Data Type Selection"></a>2. Data Type Selection</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># For counters</span></span><br><span class="line">INCR counter           <span class="comment"># Better than SET counter &quot;1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For boolean flags</span></span><br><span class="line">SETBIT flags 1001 1    <span class="comment"># Better than SET flag:1001 &quot;true&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For unique counting</span></span><br><span class="line">PFADD unique_visitors user:1001  <span class="comment"># Better than SADD for large sets</span></span><br></pre></td></tr></table></figure>

<h4 id="3-Memory-Monitoring"><a href="#3-Memory-Monitoring" class="headerlink" title="3. Memory Monitoring"></a>3. Memory Monitoring</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Check memory usage</span></span><br><span class="line">MEMORY STATS</span><br><span class="line">MEMORY USAGE mykey SAMPLES 5</span><br><span class="line"></span><br><span class="line"><span class="comment"># Identify memory hogs</span></span><br><span class="line">redis-cli --bigkeys</span><br><span class="line">redis-cli --memkeys</span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Explain that Redis encoding transitions are transparent but can cause performance spikes during conversion. Understanding thresholds helps design applications that avoid frequent transitions.</p>
<hr>
<h2 id="Performance-Considerations-1"><a href="#Performance-Considerations-1" class="headerlink" title="Performance Considerations"></a>Performance Considerations</h2><h3 id="Time-Complexity-by-Operation"><a href="#Time-Complexity-by-Operation" class="headerlink" title="Time Complexity by Operation"></a>Time Complexity by Operation</h3><table>
<thead>
<tr>
<th>Data Type</th>
<th>Operation</th>
<th>Time Complexity</th>
<th>Notes</th>
</tr>
</thead>
<tbody><tr>
<td>String</td>
<td>GET&#x2F;SET</td>
<td>O(1)</td>
<td></td>
</tr>
<tr>
<td>Hash</td>
<td>HGET&#x2F;HSET</td>
<td>O(1)</td>
<td>O(n) for HGETALL</td>
</tr>
<tr>
<td>List</td>
<td>LPUSH&#x2F;RPUSH</td>
<td>O(1)</td>
<td></td>
</tr>
<tr>
<td>List</td>
<td>LINDEX</td>
<td>O(n)</td>
<td>Avoid on large lists</td>
</tr>
<tr>
<td>Set</td>
<td>SADD&#x2F;SREM</td>
<td>O(1)</td>
<td></td>
</tr>
<tr>
<td>Set</td>
<td>SINTER</td>
<td>O(n*m)</td>
<td>n &#x3D; smallest set size</td>
</tr>
<tr>
<td>ZSet</td>
<td>ZADD&#x2F;ZREM</td>
<td>O(log n)</td>
<td></td>
</tr>
<tr>
<td>ZSet</td>
<td>ZRANGE</td>
<td>O(log n + m)</td>
<td>m &#x3D; result size</td>
</tr>
</tbody></table>
<h3 id="Pipelining-and-Batching"><a href="#Pipelining-and-Batching" class="headerlink" title="Pipelining and Batching"></a>Pipelining and Batching</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Without pipelining (multiple round trips)</span></span><br><span class="line">SET key1 value1</span><br><span class="line">SET key2 value2</span><br><span class="line">SET key3 value3</span><br><span class="line"></span><br><span class="line"><span class="comment"># With pipelining (single round trip)</span></span><br><span class="line">redis-cli --pipe &lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">SET key1 value1</span></span><br><span class="line"><span class="string">SET key2 value2</span></span><br><span class="line"><span class="string">SET key3 value3</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Lua scripting for atomic operations</span></span><br><span class="line">EVAL <span class="string">&quot;</span></span><br><span class="line"><span class="string">  redis.call(&#x27;SET&#x27;, KEYS[1], ARGV[1])</span></span><br><span class="line"><span class="string">  redis.call(&#x27;INCR&#x27;, KEYS[2])</span></span><br><span class="line"><span class="string">  return redis.call(&#x27;GET&#x27;, KEYS[2])</span></span><br><span class="line"><span class="string">&quot;</span> 2 mykey counter myvalue</span><br></pre></td></tr></table></figure>

<h3 id="Connection-Pooling"><a href="#Connection-Pooling" class="headerlink" title="Connection Pooling"></a>Connection Pooling</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Python example with connection pooling</span></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connection pool</span></span><br><span class="line">pool = redis.ConnectionPool(</span><br><span class="line">    host=<span class="string">&#x27;localhost&#x27;</span>,</span><br><span class="line">    port=<span class="number">6379</span>,</span><br><span class="line">    db=<span class="number">0</span>,</span><br><span class="line">    max_connections=<span class="number">20</span>,</span><br><span class="line">    retry_on_timeout=<span class="literal">True</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br></pre></td></tr></table></figure>

<h3 id="Monitoring-and-Profiling"><a href="#Monitoring-and-Profiling" class="headerlink" title="Monitoring and Profiling"></a>Monitoring and Profiling</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Monitor commands in real-time</span></span><br><span class="line">MONITOR</span><br><span class="line"></span><br><span class="line"><span class="comment"># Slow query log</span></span><br><span class="line">CONFIG SET slowlog-log-slower-than 10000  <span class="comment"># 10ms</span></span><br><span class="line">SLOWLOG GET 10</span><br><span class="line"></span><br><span class="line"><span class="comment"># Client connections</span></span><br><span class="line">CLIENT LIST</span><br><span class="line">CLIENT TRACKING ON</span><br><span class="line"></span><br><span class="line"><span class="comment"># Performance stats</span></span><br><span class="line">INFO stats</span><br><span class="line">INFO commandstats</span><br></pre></td></tr></table></figure>

<p><strong>🎯 Interview Insight</strong>: Always mention that Redis is single-threaded for command execution, so blocking operations can affect overall performance. Understanding this helps explain why pipelining and non-blocking operations are crucial.</p>
<hr>
<h2 id="Common-Interview-Questions-Answers"><a href="#Common-Interview-Questions-Answers" class="headerlink" title="Common Interview Questions &amp; Answers"></a>Common Interview Questions &amp; Answers</h2><h3 id="1-“How-does-Redis-achieve-such-high-performance-”"><a href="#1-“How-does-Redis-achieve-such-high-performance-”" class="headerlink" title="1. “How does Redis achieve such high performance?”"></a>1. “How does Redis achieve such high performance?”</h3><p><strong>Key Points:</strong></p>
<ul>
<li>Single-threaded command execution eliminates lock contention</li>
<li>In-memory storage with optimized data structures</li>
<li>Efficient network I&#x2F;O with epoll&#x2F;kqueue</li>
<li>Smart encoding selection based on data characteristics</li>
<li>Pipelining support reduces network round trips</li>
</ul>
<h3 id="2-“Explain-the-trade-offs-between-Redis-data-types”"><a href="#2-“Explain-the-trade-offs-between-Redis-data-types”" class="headerlink" title="2. “Explain the trade-offs between Redis data types”"></a>2. “Explain the trade-offs between Redis data types”</h3><p><strong>Answer Framework:</strong></p>
<ul>
<li><strong>Memory vs. Access Pattern</strong>: Hash vs. String for objects</li>
<li><strong>Accuracy vs. Memory</strong>: HyperLogLog vs. Set for counting</li>
<li><strong>Simplicity vs. Features</strong>: List vs. Stream for queues</li>
<li><strong>Query Flexibility vs. Memory</strong>: Sorted Set’s dual structure</li>
</ul>
<h3 id="3-“How-would-you-design-a-real-time-leaderboard-”"><a href="#3-“How-would-you-design-a-real-time-leaderboard-”" class="headerlink" title="3. “How would you design a real-time leaderboard?”"></a>3. “How would you design a real-time leaderboard?”</h3><p><strong>Solution:</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Use Sorted Set with score as points</span></span><br><span class="line">ZADD leaderboard 1500 <span class="string">&quot;player1&quot;</span> 1200 <span class="string">&quot;player2&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Real-time updates</span></span><br><span class="line">ZINCRBY leaderboard 100 <span class="string">&quot;player1&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get rankings</span></span><br><span class="line">ZREVRANGE leaderboard 0 9 WITHSCORES  <span class="comment"># Top 10</span></span><br><span class="line">ZREVRANK leaderboard <span class="string">&quot;player1&quot;</span>        <span class="comment"># Player rank</span></span><br></pre></td></tr></table></figure>

<h3 id="4-“How-do-you-handle-Redis-memory-limitations-”"><a href="#4-“How-do-you-handle-Redis-memory-limitations-”" class="headerlink" title="4. “How do you handle Redis memory limitations?”"></a>4. “How do you handle Redis memory limitations?”</h3><p><strong>Strategies:</strong></p>
<ul>
<li>Use appropriate data types and encodings</li>
<li>Implement expiration policies</li>
<li>Use Redis Cluster for horizontal scaling</li>
<li>Monitor memory usage and optimize keys</li>
<li>Consider data archival strategies</li>
</ul>
<h3 id="5-“Explain-Redis-persistence-options-and-their-trade-offs”"><a href="#5-“Explain-Redis-persistence-options-and-their-trade-offs”" class="headerlink" title="5. “Explain Redis persistence options and their trade-offs”"></a>5. “Explain Redis persistence options and their trade-offs”</h3><p><strong>RDB vs AOF:</strong></p>
<ul>
<li><strong>RDB</strong>: Point-in-time snapshots, compact, faster restarts</li>
<li><strong>AOF</strong>: Command logging, better durability, larger files</li>
<li><strong>Hybrid</strong>: RDB + AOF for best of both worlds</li>
</ul>
<hr>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>Understanding Redis data types and their underlying data structures is crucial for:</p>
<ul>
<li><strong>Optimal Performance</strong>: Choosing the right data type for your use case</li>
<li><strong>Memory Efficiency</strong>: Leveraging Redis’s encoding optimizations</li>
<li><strong>Scalability</strong>: Designing systems that work well with Redis’s architecture</li>
<li><strong>Reliability</strong>: Understanding persistence and replication implications</li>
</ul>
<p>Remember that Redis’s power comes from its simplicity and the careful engineering of its data structures. Each data type is optimized for specific access patterns and use cases.</p>
<p><strong>Final Interview Tip</strong>: Always relate theoretical knowledge to practical scenarios. Demonstrate understanding by explaining not just <em>what</em> Redis does, but <em>why</em> it makes those design choices and <em>when</em> to use each feature.</p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/redis/" rel="tag"># redis</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2025/06/09/Kafka-Performance-Theory-Best-Practices/" rel="prev" title="Kafka Performance: Theory, Best Practices">
                  <i class="fa fa-angle-left"></i> Kafka Performance: Theory, Best Practices
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2025/06/10/Kafka-Message-Ordering-Theory-Practice-and-Interview-Insights/" rel="next" title="Kafka Message Ordering: Theory, Practice, and Interview Insights">
                  Kafka Message Ordering: Theory, Practice, and Interview Insights <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2025</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Charlie Feng</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/muse/" rel="noopener" target="_blank">NexT.Muse</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>

</body>
</html>
